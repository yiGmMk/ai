<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Êú¨ÊñáÊ∑±ÂÖ•Êé¢ËÆ®‰∫Ü Golang pprof ÁöÑ‰ΩøÁî®ÊñπÊ≥ïÂíåÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºåÈÄöËøáÂÆûÊàòÊ°à‰æãÂàÜÊûê‰∫Ü CPU„ÄÅÂÜÖÂ≠ò„ÄÅÈòªÂ°û„ÄÅ‰∫íÊñ•ÈîÅÂíåÂçèÁ®ãÁöÑÊÄßËÉΩÂàÜÊûêÊµÅÁ®ã„ÄÇ">
<title>Golang pprof Ê°à‰æãÂÆûÊàò‰∏éÂéüÁêÜËß£Êûê</title>

<link rel='canonical' href='https://ai.programnotes.cn/p/golang-pprof-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98%E4%B8%8E%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Golang pprof Ê°à‰æãÂÆûÊàò‰∏éÂéüÁêÜËß£Êûê">
<meta property='og:description' content="Êú¨ÊñáÊ∑±ÂÖ•Êé¢ËÆ®‰∫Ü Golang pprof ÁöÑ‰ΩøÁî®ÊñπÊ≥ïÂíåÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºåÈÄöËøáÂÆûÊàòÊ°à‰æãÂàÜÊûê‰∫Ü CPU„ÄÅÂÜÖÂ≠ò„ÄÅÈòªÂ°û„ÄÅ‰∫íÊñ•ÈîÅÂíåÂçèÁ®ãÁöÑÊÄßËÉΩÂàÜÊûêÊµÅÁ®ã„ÄÇ">
<meta property='og:url' content='https://ai.programnotes.cn/p/golang-pprof-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98%E4%B8%8E%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/'>
<meta property='og:site_name' content='AI'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='pprof' /><meta property='article:tag' content='golang' /><meta property='article:tag' content='ÊÄßËÉΩÂàÜÊûê' /><meta property='article:tag' content='ÊÄßËÉΩ‰ºòÂåñ' /><meta property='article:published_time' content='2025-05-26T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-05-26T00:00:00&#43;00:00'/><meta property='og:image' content='https://ai.programnotes.cn/img/ai/5ae3f1a827d48b1aa7401426044bfdfb.png' />
<meta name="twitter:title" content="Golang pprof Ê°à‰æãÂÆûÊàò‰∏éÂéüÁêÜËß£Êûê">
<meta name="twitter:description" content="Êú¨ÊñáÊ∑±ÂÖ•Êé¢ËÆ®‰∫Ü Golang pprof ÁöÑ‰ΩøÁî®ÊñπÊ≥ïÂíåÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºåÈÄöËøáÂÆûÊàòÊ°à‰æãÂàÜÊûê‰∫Ü CPU„ÄÅÂÜÖÂ≠ò„ÄÅÈòªÂ°û„ÄÅ‰∫íÊñ•ÈîÅÂíåÂçèÁ®ãÁöÑÊÄßËÉΩÂàÜÊûêÊµÅÁ®ã„ÄÇ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://ai.programnotes.cn/img/ai/5ae3f1a827d48b1aa7401426044bfdfb.png' />
    <link rel="shortcut icon" href="/favicon.png" />

      <script async src="https://www.googletagmanager.com/gtag/js?id=G-KGCNFWCDTR"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-KGCNFWCDTR');
        }
      </script><meta name="msvalidate.01" content="B6FE76A783A1770409EC903DE2C7AC6A">
<meta name="baidu-site-verification" content="codeva-1aWsoaZLwH" />
<meta name="shenma-site-verification" content="9266d91a096820488e830bfe1e237090_1731993487">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3614504270218797"
    crossorigin="anonymous"></script>
<script defer src="https://cloud.umami.is/script.js" data-website-id="ace0f5f1-8f36-4d8b-a122-801a30143f39"></script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_c0725a632d5dc26d.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">AI</a></h1>
            <h2 class="site-description">ÊØèÂ§©ÂàÜ‰∫´ AI ÊúÄÁÉ≠Èó®ÁöÑÂÜÖÂÆπ</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>È¶ñÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÈìæÊé•</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://h5.lot-ml.com/ProductEn/Index/38a51af190afbde1' target="_blank">
                
                
                
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="400px" height="400px" viewBox="0 0 400 400" enable-background="new 0 0 400 400" xml:space="preserve">  <image id="image0" width="400" height="400" x="0" y="0"
    xlink:href="data:image/png;base64,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
DAwMDAwMDAz/wAARCACgAKADASIAAhEBAxEB/90ABAAK/8QBPwAAAQUBAQEBAQEAAAAAAAAAAwAB
AgQFBgcICQoLAQABBQEBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAEEAQMCBAIFBwYIBQMMMwEA
AhEDBCESMQVBUWETInGBMgYUkaGxQiMkFVLBYjM0coLRQwclklPw4fFjczUWorKDJkSTVGRFwqN0
NhfSVeJl8rOEw9N14/NGJ5SkhbSVxNTk9KW1xdXl9VZmdoaWprbG1ub2N0dXZ3eHl6e3x9fn9xEA
AgIBAgQEAwQFBgcHBgU1AQACEQMhMRIEQVFhcSITBTKBkRShsUIjwVLR8DMkYuFygpJDUxVjczTx
JQYWorKDByY1wtJEk1SjF2RFVTZ0ZeLys4TD03Xj80aUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm
9ic3R1dnd4eXp7fH/9oADAMBAAIRAxEAPwCinTJ11rgqSSSSUpOmTpqVJ0ydBSkkkkClSdMnQUpO
mTpqVJJJIKUnTJ0EqSSSQU//0KKdMnXWuCpJJJJSk6ZOmpUnTJIKXSSSQKVJ0ydBSk6ZOmpUkkkg
pSSSSCV0kkkCp//RopJJLrnBXSSSQUpOmToJUkkkmqXTsa57211tL7HmGMYC5zj4MY33OVzpHR8z
q+T6GKNrGx617h7KwfH9+x3+Dp/89sXoXR+g9P6RVtx2brnCLch+tj/7X5jP+CZ+jVTmucx4NPmy
fuD/ALpsYOWll1+WP73/AHryPT/qR1bKAflOZg1n8136Sz/ttjm1s/7d/sLWd9S+g4WO/Jzsi51d
Td1r3PDGgDypYx3/AEl1K4D639dOflnAof8AqeK6HEcWXDQ/9bod7Gf8L+k/0So4c/M8zk4RL24D
WXAK4Y/3vmbOTFhwwsx45bDi6lxMp+LZkPdh0uoxpiqt7i98D8+1zy73v/c/waGmSWrVCu3fVoXe
q6SSSRUpJJJNSukkkgp//9KikkkuucFdJJJBSk6ZOgUqV3pHScnq2a3Eo9ojddceK2cb/wCU930a
mf8Aov1FRJDQSeAvS/qz0ZvSumsa9sZd8WZLu+4jSqf3KG/o/wDwT/CKpzvM+xjsfPL0w/bL/BZ+
Ww+7Oj8sdZfwb3T+n4vTsVmJiM2VM+ZcT9Kyx3573qykkufkTIkk2TqSXVAAFDQBxfrX1c9M6U70
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
mSQS/wD/2dXzq5EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDYtMDlUMDM6MzY6NDcrMDA6MDBv
ad4DAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI1LTA2LTA5VDAzOjM2OjQ3KzAwOjAwHjRmvwAAACh0
RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNS0wNi0wOVQwMzozNjo0NyswMDowMEkhR2AAAAAWdEVYdGV4
aWY6Qml0c1BlclNhbXBsZQA4LCCYT2uCAAAAF3RFWHRleGlmOkNvbG9yU3BhY2UANjU1MzUsILj4
LMsAAAAhdEVYdGV4aWY6RGF0ZVRpbWUAMjAyMjoxMToyOSAxMDoyODo1NYCIVlgAAAAVdEVYdGV4
aWY6RXhpZk9mZnNldAAyMzIsILVnTacAAAAVdEVYdGV4aWY6RXhpZlZlcnNpb24AMDIyMeRcNS0A
AAAWdEVYdGV4aWY6SW1hZ2VMZW5ndGgANDAwLCC0o8dZAAAAFXRFWHRleGlmOkltYWdlV2lkdGgA
NDAwLCAnOeJHAAAAInRFWHRleGlmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24AMiwgoZI9+AAA
ABp0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24ANDAwLCAt6cShAAAAGnRFWHRleGlmOlBpeGVsWURp
bWVuc2lvbgA0MDAsIIOBVTAAAAAYdEVYdGV4aWY6U2FtcGxlc1BlclBpeGVsADMsIPSdHuAAAAAq
dEVYdGV4aWY6U29mdHdhcmUAQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKdFhpnAAAAAedEVY
dGV4aWY6dGh1bWJuYWlsOkNvbXByZXNzaW9uADYsIOZ5GlMAAAAqdEVYdGV4aWY6dGh1bWJuYWls
OkpQRUdJbnRlcmNoYW5nZUZvcm1hdAAzODIsICRAnw0AAAAxdEVYdGV4aWY6dGh1bWJuYWlsOkpQ
RUdJbnRlcmNoYW5nZUZvcm1hdExlbmd0aAAzODEzLCAQx8TGAAAAIXRFWHRleGlmOnRodW1ibmFp
bDpSZXNvbHV0aW9uVW5pdAAyLCBlQJb2AAAAH3RFWHRleGlmOnRodW1ibmFpbDpYUmVzb2x1dGlv
bgA3Mi8x2ocYLAAAAB90RVh0ZXhpZjp0aHVtYm5haWw6WVJlc29sdXRpb24ANzIvMXTvib0AAAAA
SUVORK5CYII=" />
</svg>

                
                <span>ÊµÅÈáèÂç°</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://ai.programnotes.cn/" selected>‰∏≠Êñá</option>
                                
                                    <option value="https://ai.programnotes.cn/en/" >English</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ÂâçË®Ä">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆûÊàò-demo">ÂÆûÊàò demo</a>
      <ol>
        <li><a href="#11-ÂâçÁΩÆÂáÜÂ§á">1.1 ÂâçÁΩÆÂáÜÂ§á</a></li>
        <li><a href="#pprofÈ°µÈù¢ÊÄªËßà">pprofÈ°µÈù¢ÊÄªËßà</a></li>
        <li><a href="#cpuÂàÜÊûê">cpuÂàÜÊûê</a></li>
        <li><a href="#heapÂàÜÊûê">heapÂàÜÊûê</a></li>
        <li><a href="#blockÂàÜÊûê">blockÂàÜÊûê</a></li>
        <li><a href="#mutexÂàÜÊûê">mutexÂàÜÊûê</a></li>
        <li><a href="#goroutineÂàÜÊûê">goroutineÂàÜÊûê</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆûÁé∞ÂéüÁêÜ">ÂÆûÁé∞ÂéüÁêÜ</a>
      <ol>
        <li><a href="#pprof-init">pprof init</a></li>
        <li><a href="#cpuÂàÜÊûêprofile">cpuÂàÜÊûê(profile)</a></li>
        <li><a href="#ÈÄöÁî®-index-Â§ÑÁêÜ">ÈÄöÁî® index Â§ÑÁêÜ</a></li>
        <li><a href="#heapblockmutex-‰ø°ÊÅØÂ≠òÂÇ®ÁªìÊûÑ">heap„ÄÅblock„ÄÅmutex ‰ø°ÊÅØÂ≠òÂÇ®ÁªìÊûÑ</a></li>
        <li><a href="#ÂÜÖÂ≠òÂàÜÊûêheap">ÂÜÖÂ≠òÂàÜÊûêÔºàheapÔºâ</a></li>
        <li><a href="#block-ÂàÜÊûê">block ÂàÜÊûê</a></li>
        <li><a href="#27-mutex-ÂàÜÊûê">2.7 mutex ÂàÜÊûê</a></li>
        <li><a href="#goroutine-ÂàÜÊûê">goroutine ÂàÜÊûê</a></li>
      </ol>
    </li>
    <li><a href="#3-ÊÄªÁªì">3 ÊÄªÁªì</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/golang-pprof-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98%E4%B8%8E%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/">
                
                    <img src="https://ai.programnotes.cn/img/ai/5ae3f1a827d48b1aa7401426044bfdfb.png" loading="lazy" alt="Featured image of post Golang pprof Ê°à‰æãÂÆûÊàò‰∏éÂéüÁêÜËß£Êûê" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/golang/" >
                Golang
            </a>
        
            <a href="/categories/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/" >
                ÊÄßËÉΩË∞É‰ºò
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/golang-pprof-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98%E4%B8%8E%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/">Golang pprof Ê°à‰æãÂÆûÊàò‰∏éÂéüÁêÜËß£Êûê</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Êú¨ÊñáÊ∑±ÂÖ•Êé¢ËÆ®‰∫Ü Golang pprof ÁöÑ‰ΩøÁî®ÊñπÊ≥ïÂíåÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºåÈÄöËøáÂÆûÊàòÊ°à‰æãÂàÜÊûê‰∫Ü CPU„ÄÅÂÜÖÂ≠ò„ÄÅÈòªÂ°û„ÄÅ‰∫íÊñ•ÈîÅÂíåÂçèÁ®ãÁöÑÊÄßËÉΩÂàÜÊûêÊµÅÁ®ã„ÄÇ
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 26, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 22 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <ul>
<li><strong>pprof ‰ΩøÁî®ÊñπÊ≥ï</strong>ÔºöËØ¶ÁªÜ‰ªãÁªç‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî® pprof ËøõË°å CPU„ÄÅÂÜÖÂ≠ò„ÄÅÈòªÂ°û„ÄÅ‰∫íÊñ•ÈîÅÂíåÂçèÁ®ãÂàÜÊûêÔºåÂπ∂Êèê‰æõ‰∫ÜÂÆûÊàòÊ°à‰æã„ÄÇ</li>
<li><strong>pprof Â∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ</strong>ÔºöÊ∑±ÂÖ•Ê∫êÁ†ÅÔºåËß£Êûê‰∫Ü pprof Â¶Ç‰ΩïÈááÈõÜÂíåÂ≠òÂÇ®ÂêÑÈ°πÊÄßËÉΩÊåáÊ†áÔºåÂåÖÊã¨ CPU ÈááÊ†∑„ÄÅÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØËÆ∞ÂΩï„ÄÅÈòªÂ°û‰ø°ÊÅØ‰∏äÊä•Á≠â„ÄÇ</li>
<li><strong>ÊÄßËÉΩÂàÜÊûêÊµÅÁ®ã</strong>Ôºö‰∏≤ËÅî‰∫Ü pprof ‰∏≠Â∏∏Áî®ÁöÑÊÄßËÉΩÂàÜÊûêÊµÅÁ®ãÔºåÂ∏ÆÂä©ËØªËÄÖÊõ¥Â•ΩÂú∞ÁêÜËß£Âíå‰ΩøÁî® pprof Â∑•ÂÖ∑„ÄÇ
<strong>Ê∫êËá™</strong> |  Â∞èÂæêÂÖàÁîü1212  Â∞èÂæêÂÖàÁîüÁöÑÁºñÁ®ã‰∏ñÁïå   2025-04-26 08:28</li>
</ul>
<h2 id="ÂâçË®Ä">ÂâçË®Ä
</h2><p>pprof ÊòØ golang ‰∏≠ÊúÄÂ∏∏Áî®ÁöÑÊÄßËÉΩÂàÜÊûêÂ∑•ÂÖ∑ÔºåÊú¨ÊúüÊàë‰ª¨Êù•ËÅäÊ∏ÖÊ•ö‰∏§‰ª∂‰∫ãÊÉÖÔºö</p>
<ul>
<li>‚Ä¢ pprof ËØ•ÊÄé‰πàÁî®</li>
<li>‚Ä¢ pprof Â∫ïÂ±ÇÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ</li>
</ul>
<p>Êú¨ÊñáÊ∂âÂèäÂà∞‰∏ÄÂÆöÁöÑÊ∫êÁ†ÅÂØºËØªÁéØËäÇÔºå‰ΩøÁî®ÁöÑ golang ÁâàÊú¨ÊòØ go1.21.4ÔºåÊìç‰ΩúÁ≥ªÁªüÊòØ linux.</p>
<h2 id="ÂÆûÊàò-demo">ÂÆûÊàò demo
</h2><h3 id="11-ÂâçÁΩÆÂáÜÂ§á">1.1 ÂâçÁΩÆÂáÜÂ§á
</h3><ul>
<li>‚Ä¢ ÂÆûÊàòÈ°πÁõÆ</li>
</ul>
<p><a class="link" href="https://github.com/wolfogre/go-pprof-practice"  target="_blank" rel="noopener"
    >https://github.com/wolfogre/go-pprof-practice</a> ÊòØÈùûÂ∏∏ÁªèÂÖ∏ go pprof Â≠¶‰π†Ê°à‰æãÔºåÊú¨ÊñáÂ∞ÜÁõ¥Êé•ÂºïÁî®ËØ•È°πÁõÆ‰Ωú‰∏∫ÊÄßËÉΩÂàÜÊûêÁöÑÂÆûÊàòÁ¥†Êùê.</p>
<p><img src="/img/ai/df3de1edb23b0e97d054ee31c6c95c7f.png"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>‚Ä¢ ÁéØÂ¢ÉÂáÜÂ§á</li>
</ul>
<p>‰ΩøÁî® linux Á≥ªÁªüÔºåÊèêÂâçÂÆâË£ÖÂ•Ω graphvizÔºàpprof ÂõæÂΩ¢ÂåñÂ±ïÁ§∫Êó∂‰æùËµñÁöÑËΩØ‰ª∂Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt install graphviz
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>‚Ä¢ ËßÇÂØü main ÂáΩÊï∞ÂÖ•Âè£</li>
</ul>
<p>ÂÖàÁúã‰∏ÄÁúº go-pprof-practice ÁöÑ main ÂáΩÊï∞ÔºåÂÖ∂‰∏≠ÊúâÂá†‰∏™ÂÖ≥ÈîÆÁÇπ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">- ÂåøÂêçÂØºÂÖ•‰∫Ü net/http/pprof pkg 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">- Ë∞ÉÁî® runtime.SetMutexProfileFraction Âíå runtime.SetBlockProfileRateÔºåÂêØÁî® block Âíå mutex ÊÄßËÉΩÂàÜÊûêÔºàÈªòËÆ§ÊòØÂÖ≥Èó≠ÁöÑÔºâ  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">- ÂºÇÊ≠•ÂêØÂä®ÈªòËÆ§ÁöÑ http serverÔºàhttp.DefaultServerMuxÔºå‰∏épprofËÅîÂä®Ôºâ  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">- Âæ™ÁéØË∞ÉÁî®‰∏ÄÁ≥ªÂàó animal ÁöÑ live ÊñπÊ≥ïÔºàÈáåÈù¢Â∑≤ÁªèÊèêÂâçÂüãËÆæÂ•Ω‰∏ÄÁ≥ªÂàóÁöÑÊÄßËÉΩÁÇ∏ÂºπÔºåÁ≠âÂæÖ‰ΩøÁî® pprof Â∞Ü‰πã‰∏Ä‰∏ÄÈÄÆÊçïÔºâ 
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;log&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;net/http&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂêØÁî® pprof ÊÄßËÉΩÂàÜÊûê</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">_</span><span class="w"> </span><span class="s">&#34;net/http/pprof&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;os&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;runtime&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;time&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;github.com/wolfogre/go-pprof-practice/animal&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">GOMAXPROCS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂêØÁî® mutex ÊÄßËÉΩÂàÜÊûê</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">SetMutexProfileFraction</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂêØÁî® block ÊÄßËÉΩÂàÜÊûê</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">SetBlockProfileRate</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">gofunc</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ÂêØÂä® http server. ÂØπÂ∫î pprof ÁöÑ‰∏ÄÁ≥ªÂàó handler ‰πü‰ºöÊåÇËΩΩÂú®ËØ•Á´ØÂè£‰∏ã</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:6060&#34;</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ËøêË°åÂêÑÈ°πÂä®Áâ©ÁöÑÊ¥ªÂä®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">animal</span><span class="p">.</span><span class="nx">AllAnimals</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">v</span><span class="p">.</span><span class="nf">Live</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>‚Ä¢ ÂêØÂä®È°πÁõÆ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go run main.go
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="pprofÈ°µÈù¢ÊÄªËßà">pprofÈ°µÈù¢ÊÄªËßà
</h3><p>ËøõÂÖ• http/pprof È°µÈù¢ÔºöÔºàÁ´ØÂè£‰∏éÂêØÂä®ÁöÑ http server ‰∏ÄËá¥Ôºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">http://localhost:6060/debug/pprof/¬†
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/img/ai/31b86242b22864decceef4040f17f823.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>È°µÈù¢‰∏≠ÂåÖÂê´ÂêÑÈ°πÂÜÖÂÆπÔºåÊàë‰ª¨ÈáçÁÇπÂÖ≥Ê≥®‰∏ãÈù¢Âá†È°πÊåáÊ†áÔºå‰∏ãÊñá‰∏≠ÈÄê‰∏ÄÂ±ïÂºÄÂàÜÊûêÔºö</p>
<ul>
<li>
<p>‚Ä¢ profileÔºöÊé¢ÊµãÂêÑÂáΩÊï∞ÂØπ cpu ÁöÑÂç†Áî®ÊÉÖÂÜµ</p>
</li>
<li>
<p>‚Ä¢ heapÔºöÊé¢ÊµãÂÜÖÂ≠òÂàÜÈÖçÊÉÖÂÜµ</p>
</li>
<li>
<p>‚Ä¢ blockÔºöÊé¢ÊµãÈòªÂ°ûÊÉÖÂÜµ ÔºàÂåÖÊã¨ mutex„ÄÅchan„ÄÅcond Á≠âÔºâ</p>
</li>
<li>
<p>‚Ä¢ mutexÔºöÊé¢Êµã‰∫íÊñ•ÈîÅÂç†Áî®ÊÉÖÂÜµ</p>
</li>
<li>
<p>‚Ä¢ goroutineÔºöÊé¢ÊµãÂçèÁ®ã‰ΩøÁî®ÊÉÖÂÜµ</p>
</li>
</ul>
<h3 id="cpuÂàÜÊûê">cpuÂàÜÊûê
</h3><blockquote>
<p>cpu ÂàÜÊûêÊòØÂú®‰∏ÄÊÆµÊó∂Èó¥ÂÜÖËøõË°åÊâìÁÇπÈááÊ†∑ÔºåÈÄöËøáÊü•ÁúãÈááÊ†∑ÁÇπÂú®ÂêÑ‰∏™ÂáΩÊï∞Ê†à‰∏≠ÁöÑÂàÜÂ∏ÉÊØî‰æãÔºå‰ª•Ê≠§Êù•ÂèçÊò†ÂêÑÂáΩÊï∞ÂØπ cpu ÁöÑÂç†Áî®ÊÉÖÂÜµ.</p></blockquote>
<p>ÁÇπÂáªÈ°µÈù¢‰∏äÁöÑ profile ÂêéÔºåÈªòËÆ§‰ºöÂú®ÂÅúÁïô 30S Âêé‰∏ãËΩΩ‰∏Ä‰∏™ cpu profile Êñá‰ª∂. ÈÄöËøá‰∫§‰∫íÂºèÊåá‰ª§ÊâìÂºÄÊñá‰ª∂ÂêéÔºåÊü•Áúã cpu ‰ΩøÁî®ÊÉÖÂÜµÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go tool  pprof <span class="o">{</span>YOUR PROFILE PATH<span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">(</span>pprof<span class="o">)</span> top
</span></span><span class="line"><span class="cl">Showing nodes accounting <span class="k">for</span> 13510ms, 99.48% of 13580ms total
</span></span><span class="line"><span class="cl">Dropped <span class="m">30</span> nodes <span class="o">(</span>cum &lt;<span class="o">=</span> 67.90ms<span class="o">)</span>
</span></span><span class="line"><span class="cl">      flat  flat%   sum%        cum   cum%
</span></span><span class="line"><span class="cl">   13020ms 95.88% 95.88%    13510ms 99.48%  github.com/wolfogre/go-pprof-practice/animal/felidae/tiger.<span class="o">(</span>*Tiger<span class="o">)</span>.Eat
</span></span><span class="line"><span class="cl">     490ms  3.61% 99.48%      490ms  3.61%  runtime.asyncPreempt
</span></span><span class="line"><span class="cl">         <span class="m">0</span>     0% 99.48%    13520ms 99.56%  github.com/wolfogre/go-pprof-practice/animal/felidae/tiger.<span class="o">(</span>*Tiger<span class="o">)</span>.Live
</span></span><span class="line"><span class="cl">         <span class="m">0</span>     0% 99.48%    13540ms 99.71%  main.main
</span></span><span class="line"><span class="cl">         <span class="m">0</span>     0% 99.48%    13540ms 99.71%  runtime.main
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈíàÂØπ‰∏äËø∞‰ø°ÊÅØËøõË°åËß£ÈáäÔºö</p>
<ul>
<li>
<p>‚Ä¢ 13510 ms‚Äî‚ÄîÈááÊ†∑ÁÇπÂ§ßÁ∫¶Ë¶ÜÁõñ‰∫Ü 13510 ms ÁöÑÊó∂Èïø</p>
</li>
<li>
<p>‚Ä¢ flatÔºöÊüê‰∏™ÂáΩÊï∞ÊâßË°åÊó∂ÈïøÔºàÂè™ËÅöÁÑ¶ÂáΩÊï∞Êú¨Ë∫´ÔºåÂâîÈô§Â≠êÂáΩÊï∞ÈÉ®ÂàÜÔºâ</p>
<ul>
<li>‚Ä¢13020ms‚Äî‚ÄîTiger.Eat Ëøô‰∏™ÊñπÊ≥ïÊú¨Ë∫´ÁöÑË∞ÉÁî®Êó∂Èïø</li>
</ul>
</li>
<li>
<p>‚Ä¢ flat%ÔºöÊüê‰∏™ÂáΩÊï∞ÊâßË°åÊó∂ÈïøÔºàÂè™ËÅöÁÑ¶ÂáΩÊï∞Êú¨Ë∫´ÔºåÂâîÈô§Â≠êÂáΩÊï∞ÈÉ®ÂàÜÔºâ</p>
</li>
<li>
<p>‚Ä¢ sum%ÔºöÊüê‰∏™ÂáΩÊï∞ÂèäÂÖ∂‰πã‰∏äÁà∂ÂáΩÊï∞ÁöÑÊÄªÊó∂ÈïøÂç†ÊØî</p>
</li>
<li>
<p>‚Ä¢ cumÔºöÊüê‰∏™ÂáΩÊï∞ÂèäÂÖ∂Â≠êÂáΩÊï∞ÁöÑÊÄªË∞ÉÁî®Êó∂Èïø</p>
<ul>
<li>‚Ä¢ 13510ms‚Äî‚ÄîTiger.Eat Âä†‰∏äÂÖ∂Ë∞ÉÁî®Â≠êÂáΩÊï∞ runtime.asyncPreempt ÁöÑÊÄªÊó∂Èïø</li>
</ul>
</li>
<li>
<p>‚Ä¢ cum%ÔºöÊüê‰∏™ÂáΩÊï∞ÂèäÂÖ∂Â≠êÂáΩÊï∞ÁöÑË∞ÉÁî®Êó∂ÈïøÂú®ÊÄªÊó∂Èïø‰∏≠ÁöÑÂç†ÊØî</p>
</li>
</ul>
<p>Èô§Ê≠§‰πãÂ§ñÔºåËøòÂèØ‰ª•ÈÄöËøáÂõæÂΩ¢ÂåñÁïåÈù¢Êù•Â±ïÁ§∫ cpu profile Êñá‰ª∂‰∏≠ÁöÑÂÜÖÂÆπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">go tool pprof -http<span class="o">=</span>:8082 ¬†<span class="o">{</span>YOUR PROFILE PATH<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåÂú®Ë∞ÉÁî®ÈìæÁöÑÊãìÊâëÁªìÊûÑ‰∏≠ÔºåÂá†È°πÊåáÊ†áÊòØÂíå‰∏äËø∞ÊâÄ‰ªãÁªçÁöÑÂÜÖÂÆπ‰∏Ä‰∏ÄÂØπÂ∫îÁöÑÔºö</p>
<p><img src="/img/ai/f4fde8e0975198333d94a7991c0a4dab.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Ê≠§Â§ñÔºåÁî±‰∫éÈÉ®ÂàÜÂêåÂ≠¶ÂØπ‰∫éÁÅ´ÁÑ∞Âõæ‰ΩøÁî®ÊØîËæÉ‰π†ÊÉØÔºåËøôÈáå‰πüÂèØ‰ª•ÂêØÁî®ÁÅ´ÁÑ∞ÂõæÁöÑÊ†ºÂºèÔºö VIEW -&gt; Flame Graph</p>
<p><img src="/img/ai/d31e72c3a1c99059529fab6420e101d5.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Âú® CPU ÊÄßËÉΩÂàÜÊûê‰∏≠ÔºåË¶ÅÂÆö‰ΩçÊÄßËÉΩÁì∂È¢àÂèØ‰ª•Ê†∏ÂøÉÁúã flat% Ëøô‰∏™ÊåáÊ†áÔºåÂú®Ëøô‰∏™Ê°à‰æã‰∏≠‰∏çÈöæÁúãÂá∫ÈóÆÈ¢òÁóáÁªì‰∫ßÁîü‰∫é Tiger.Eat ÂáΩÊï∞ÔºåÊàë‰ª¨ÊâìÂºÄÈ°πÁõÆ‰ª£Á†Å‰∏ÄÊé¢Á©∂Á´üÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">Tiger</span><span class="p">)</span><span class="w"> </span><span class="nf">Eat</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;eat&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">loop</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">10000000000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">loop</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// do nothing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÁúãÂà∞Ôºå‰ΩúËÄÖÂú®ËøôÈáåÂüã‰∫Ü‰∏™ÁÇ∏ÂºπÔºåÈÄöËøá for Âæ™ÁéØÂ§ßÈáèÁ©∫ËΩ¨ÊâìÊª° CPU.</p>
<p>Âè¶Â§ñÔºåËøôÈáåÊàë‰ª¨‰∏ªË¶ÅÊ≥®ÊÑèÂà∞Âè¶‰∏Ä‰∏™ÁªÜËäÇÔºåÊòØ pprof ÂëäËØâÊàë‰ª¨ Tiger.Eat ‰∏≠ËøòÊúâ‰∏™Â≠êÂáΩÊï∞ runtime.asyncPreempt Ëä±Ë¥π‰∫ÜÂ§ßÁ∫¶ 490 ms ÁöÑÊó∂Èó¥Ôºå‰ΩÜÊòØËøô‰∏ÄÁÇπÂú®‰ª£Á†Å‰∏≠Âπ∂Ê≤°Êúâ‰ΩìÁé∞ÔºåËøôÂèàÊòØÊÄé‰πàÂõû‰∫ãÂë¢Ôºü ËøôÈáåÊàë‰ª¨ÈúÄË¶ÅÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ãÂú® golang ‰∏≠ÂÖ≥‰∫é goroutine Ë∂ÖÊó∂Êä¢Âç†Êú∫Âà∂ÁöÑËÆæÂÆöÔºö</p>
<ul>
<li>
<p>‚Ä¢ ÁõëÊéßÁ∫øÁ®ãÔºöÂú® go ËøõÁ®ãÂêØÂä®Êó∂Ôºå‰ºöÂêØÂä®‰∏Ä‰∏™ monitor Á∫øÁ®ãÔºå‰Ωú‰∏∫Á¨¨‰∏âÊñπËßÇÂØüËÄÖËßíËâ≤‰∏çÊñ≠ËΩÆËØ¢Êé¢ÊµãÂêÑ g ÁöÑÊâßË°åÊÉÖÂÜµÔºåÂØπ‰∫é‰∏Ä‰∫õÊâßË°åÊó∂Èó¥ËøáÈïøÁöÑ g Âá∫ÊâãÂπ≤È¢Ñ</p>
</li>
<li>
<p>‚Ä¢ Âçè‰ΩúÂºèÊä¢Âç†ÔºöÂΩì g Âú®ËøêË°åËøáÁ®ã‰∏≠ÂèëÁîüÊ†àÊâ©Âº†Êó∂ÔºàÈÄöÂ∏∏Áî±ÂáΩÊï∞Ë∞ÉÁî®ÂºïËµ∑ÔºâÔºåÂàô‰ºöËß¶ÂèëÈ¢ÑÁïôÁöÑÊ£ÄÊü•ÁÇπÈÄªËæëÔºåÊü•ÁúãËá™Â∑±Ëã•ÊòØÂõ†‰∏∫ÊâßË°åËøáÈïøËÄåË¢´ monitor Ê†áËÆ∞ÔºåÂàô‰ºö‰∏ªÂä®ËÆ©Ê∏°Âá∫ m ÁöÑÊâßË°åÊùÉ</p>
</li>
</ul>
<blockquote>
<p>Âú® Tiger.Eat ÊñπÊ≥ï‰∏≠ÔºåÁî±‰∫éÂè™ÊòØÁÆÄÂçïÁöÑ for Âæ™ÁéØÁ©∫ËΩ¨Êó†Ê≥ïËµ∞Âà∞Ê£ÄÊü•ÁÇπÔºåÂõ†Ê≠§ËøôÁßçÂçè‰ΩúÂºèÊä¢Âç†Êó†Ê≥ïÁîüÊïà</p></blockquote>
<ul>
<li>‚Ä¢ ÈùûÂçè‰ΩúÂºèÊä¢Âç†ÔºöÂú® go 1.14 ‰πãÂêéÔºåÂêØÁî®‰∫ÜÂü∫‰∫é‰ø°Âè∑ÈáèÂÆûÁé∞ÁöÑÈùûÂçè‰ΩúÊä¢Âç†Êú∫Âà∂. Monitor Êé¢ÊµãÂà∞ g Ë∂ÖÊó∂‰ºöÂèëÈÄÅÊä¢Âç†‰ø°Âè∑Ôºåg ÊâÄÂ±û m Êî∂Âà∞‰ø°Âè∑ÂêéÔºå‰ºö‰øÆÊîπ g ÁöÑ Ê†àÁ®ãÂ∫èËÆ°Êï∞Âô® pc ÂíåÊ†àÈ°∂ÊåáÈíà sp ‰∏∫ÂÖ∂Ê≥®ÂÖ• asyncPreempt ÂáΩÊï∞. ËøôÊ†∑ g ‰ºöË∞ÉÁî®ËØ•ÂáΩÊï∞ÂÆåÊàê m ÊâßË°åÊùÉÁöÑËÆ©Ê∏°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Ê≠§Êó∂ÊâßË°åÊñπÊòØÂç≥Â∞ÜË¶ÅË¢´Êä¢Âç†ÁöÑ gÔºåËøôÊÆµ‰ª£Á†ÅÊòØË¢´‰∏¥Êó∂ÊèíÂÖ•ÁöÑÈÄªËæë</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">asyncPreempt2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">gp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">getg</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">gp</span><span class="p">.</span><span class="nx">asyncSafePoint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// mcall ÂàáÊç¢Ëá≥ g0ÔºåÁÑ∂ÂêéÂÆåÊàê g ÁöÑËÆ©Ê∏°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">mcall</span><span class="p">(</span><span class="nx">gopreempt_m</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">gp</span><span class="p">.</span><span class="nx">asyncSafePoint</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàëÂú®‰πãÂâçÂèëÂ∏ÉÁöÑÊñáÁ´†Ôºö<a class="link" href="https://mp.weixin.qq.com/s?__biz=MzkxMjQzMjA0OQ==&amp;mid=2247485311&amp;idx=1&amp;sn=0538308360bcbe75a21b13fda73260ed&amp;scene=21#wechat_redirect"  target="_blank" rel="noopener"
    >Ê∏©ÊïÖÁü•Êñ∞‚ÄîGolang GMP ‰∏áÂ≠óÊ¥óÈ´ìÁªè</a><br>
¬†5.3 Â∞èËäÇ‰∏≠ÂØπÊúâÂÖ≥ g Ë∂ÖÊó∂Êä¢Âç†Áõ∏ÂÖ≥ÂÜÖÂÆπÂ±ïÂºÄ‰∫ÜËØ¶ÁªÜÁöÑÂàÜÊûêÔºåÂ§ßÂÆ∂ÊÑüÂÖ¥Ë∂£ÁöÑËØùÂèØ‰ª•Â±ïÂºÄ‰∫ÜËß£.</p>
<h3 id="heapÂàÜÊûê">heapÂàÜÊûê
</h3><p>‰∏ãÈù¢ÊòØÂÖ≥‰∫éÂÜÖÂ≠òÁöÑÂàÜÊûêÊµÅÁ®ãÔºåÁÇπÂáª heap ËøõÂÖ•Ôºö</p>
<p>http://localhost:6060/debug/pprof/heap?debug=1</p>
<blockquote>
<p>Âú®È°µÈù¢ÁöÑË∑ØÂæÑ‰∏≠ËÉΩÁúãÂà∞ debug ÂèÇÊï∞ÔºåÂ¶ÇÊûú debug = 1ÔºåÂàôÂ∞ÜÊï∞ÊçÆÂú®È°µÈù¢‰∏äÂëàÁé∞ÔºõÂ¶ÇÊûúÂ∞Ü debug ËÆæ‰∏∫ 0ÔºåÂàô‰ºöÂ∞ÜÊï∞ÊçÆ‰ª•‰∫åËøõÂà∂Êñá‰ª∂ÁöÑÂΩ¢Âºè‰∏ãËΩΩÔºåÂπ∂ÊîØÊåÅÈÄöËøá‰∫§‰∫íÂºèÊåá‰ª§ÊàñËÄÖÂõæÂΩ¢ÂåñÁïåÈù¢ÂØπÊñá‰ª∂ÂÜÖÂÆπËøõË°åÂëàÁé∞. block/mutex/goroutine ÁöÑÊú∫Âà∂‰πü‰∏éÊ≠§Áõ∏ÂêåÔºåÂêéÁª≠Á´†ËäÇ‰∏≠‰∏çÂÜçËµòËø∞.</p></blockquote>
<p>Âú®È°µÈù¢‰∏≠Ëé∑ÂèñÂà∞ÊúâÂÖ≥ heap ÁöÑ‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">heap profile: 1: <span class="m">1291845632</span> <span class="o">[</span>21: 3371171968<span class="o">]</span> @ heap/1048576
</span></span><span class="line"><span class="cl">1: <span class="m">1291845632</span> <span class="o">[</span>1: 1291845632<span class="o">]</span> @ 0x104303b48 0x1043033b8 0x104303cc0 0x10410938c 0x10413ca24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x104303b47        github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Steal+0xf7        /Users/bytedance/projects/go-pprof-practice/animal/muridae/mouse/mouse.go:60</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x1043033b7        github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Live+0x47        /Users/bytedance/projects/go-pprof-practice/animal/muridae/mouse/mouse.go:25</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x104303cbf        main.main+0xbf                                                                        /Users/bytedance/projects/go-pprof-practice/main.go:31</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x10410938b        runtime.main+0x2bb    </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖàÁúã‰∏äËø∞ÂÜÖÂÆπÁ¨¨‰∏ÄË°åÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">heap profile: 1: <span class="m">1291845632</span> <span class="o">[</span>21: 3371171968<span class="o">]</span> @ heap/1048576
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜÖÂÆπÂê´‰πâÊòØÂú®ÂÖ®Â±ÄËßÜËßí‰∏ãÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºö</p>
<ul>
<li>
<p>‚Ä¢ 1‚ÄîÊ¥ªË∑ÉÂØπË±°‰∏™Êï∞</p>
</li>
<li>
<p>‚Ä¢ 1291845632‚ÄîÊ¥ªË∑ÉÂØπË±°Â§ßÂ∞èÔºàÂçï‰Ωç byteÔºåÊÄªËÆ°Á∫¶ 1.2GÔºâ</p>
</li>
<li>
<p>‚Ä¢ 21‚ÄîÂéÜÂè≤Ëá≥‰ªäÊâÄÊúâÂØπË±°‰∏™Êï∞</p>
</li>
<li>
<p>‚Ä¢ 3371171968‚ÄîÂéÜÂè≤Ëá≥‰ªäÊâÄÊúâÂØπË±°ÊÄªËÆ°Â§ßÂ∞èÔºàbyteÔºâ</p>
</li>
<li>
<p>‚Ä¢ 1048576‚ÄîÂÜÖÂ≠òÈááÊ†∑È¢ëÁéáÔºàÁ∫¶ÊØè M ÈááÊ†∑‰∏ÄÊ¨°Ôºâ</p>
</li>
</ul>
<p>ÂÜçÁúã‰∏ãÈù¢ÁöÑÂÜÖÂÆπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">1: <span class="m">1291845632</span> <span class="o">[</span>1: 1291845632<span class="o">]</span> @ 0x104303b48 0x1043033b8 0x104303cc0 0x10410938c 0x10413ca24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x104303b47        github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Steal+0xf7        /Users/bytedance/projects/go-pprof-practice/animal/muridae/mouse/mouse.go:60</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x1043033b7        github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Live+0x47        /Users/bytedance/projects/go-pprof-practice/animal/muridae/mouse/mouse.go:25</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x104303cbf        main.main+0xbf                                                                        /Users/bytedance/projects/go-pprof-practice/main.go:31</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x10410938b        runtime.main+0x2bb </span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπÂ∫î‰∏∫Êüê‰∏™ÂáΩÊï∞Ê†à‰∏≠ÁöÑ‰ø°ÊÅØÔºö</p>
<ul>
<li>
<p>‚Ä¢ 1-ËØ•ÂáΩÊï∞Ê†à‰∏äÂΩìÂâçÂ≠òÊ¥ªÁöÑÂØπË±°‰∏™Êï∞</p>
</li>
<li>
<p>‚Ä¢ 1291845632-ÂΩìÂâçÂ≠òÊ¥ªÂØπË±°ÊÄªÂ§ßÂ∞èÔºàbyteÔºâ</p>
</li>
<li>
<p>‚Ä¢ [] ÂÜÖÁöÑÂÜÖÂÆπ‰πüË°®Á§∫ÂéÜÂè≤Ëá≥‰ªäÔºå‰∏çÂÜçËµòËø∞</p>
</li>
</ul>
<p>‰∫éÊòØÂæó‰ª•ÂÆö‰ΩçÂà∞ÈóÆÈ¢òÁóáÁªìÊâÄÂú®ÊòØ Mouse.Steal ÊñπÊ≥ïÔºåÊ≠§Â§ÑÂú®‰∏çÊñ≠ÂØπ buffer ËøΩÂä†ÂÜÖÂÆπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">m</span><span class="w"> </span><span class="o">*</span><span class="nx">Mouse</span><span class="p">)</span><span class="w"> </span><span class="nf">Steal</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;steal&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">max</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">constant</span><span class="p">.</span><span class="nx">Gi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">buffer</span><span class="p">)</span><span class="o">*</span><span class="nx">constant</span><span class="p">.</span><span class="nx">Mi</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">max</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">m</span><span class="p">.</span><span class="nx">buffer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">buffer</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">constant</span><span class="p">.</span><span class="nx">Mi</span><span class="p">]</span><span class="kt">byte</span><span class="p">{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="blockÂàÜÊûê">blockÂàÜÊûê
</h3><p>‰∏ãÈù¢ËøõË°åÈòªÂ°ûÂàÜÊûê. È¶ñÂÖàÊòéÁ°ÆblockÂàÜÊûêÁöÑÂê´‰πâÔºö</p>
<blockquote>
<p>Êü•ÁúãÊüê‰∏™ goroutine Èô∑ÂÖ• waiting Áä∂ÊÄÅÔºàË¢´Âä®ÈòªÂ°ûÔºåÈÄöÂ∏∏Âõ† gopark Êìç‰ΩúËß¶ÂèëÔºåÊØîÂ¶ÇÂõ†Âä†ÈîÅ„ÄÅËØªchanÊù°‰ª∂‰∏çÊª°Ë∂≥ËÄåÈô∑ÂÖ•ÈòªÂ°ûÔºâÁöÑËß¶ÂèëÊ¨°Êï∞ÂíåÊåÅÁª≠Êó∂Èïø.</p></blockquote>
<p>pprof ÈªòËÆ§‰∏çÂêØÁî® block ÂàÜÊûêÔºåËã•Ë¶ÅÂºÄÂêØÂàôÈúÄË¶ÅËøõË°åÂ¶Ç‰∏ãËÆæÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">runtime</span><span class="p">.</span><span class="nf">SetBlockProfileRate</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠§Â§ÑÁöÑÂÖ•ÂèÇËÉΩÂ§üÊéßÂà∂ block ÈááÊ†∑È¢ëÁéáÔºö</p>
<ul>
<li>
<p>‚Ä¢ 1ÔºöÂßãÁªàÈááÁî®</p>
</li>
<li>
<p>‚Ä¢ &lt;=0Ôºö‰∏çÈááÊ†∑</p>
</li>
<li>
<p>‚Ä¢ Ëã• &gt; 1ÔºöÂΩìÈòªÂ°ûÊó∂Èïø(ns)Â§ß‰∫éËØ•ÂÄºÂàôÈááÊ†∑ÔºåÂê¶ÂàôÊúâÈòªÂ°ûÊó∂Èïø/rateÁöÑÊ¶ÇÁéáË¢´ÈááÊ†∑</p>
</li>
</ul>
<p>‰∏ãÈù¢ÁÇπÂáªÈ°µÈù¢‰∏≠ÁöÑ blockÔºåËøõÂÖ• http://localhost:6060/debug/pprof/block?debug=1 Êü•ÁúãÈòªÂ°û‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--- contention:
</span></span><span class="line"><span class="cl">cycles/second<span class="o">=</span><span class="m">1000002977</span>
</span></span><span class="line"><span class="cl">                                                           /usr/local/go/src/runtime/proc.go:267
</span></span><span class="line"><span class="cl"><span class="m">3002910915</span> <span class="m">3</span> @ 0x100052224 0x10027e9e4 0x10027e5d8 0x10027fb00 0x10008538c 0x1000b8a24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100052223        runtime.chanrecv1+0x13                                                                /usr/local/go/src/runtime/chan.go:442</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x10027e9e3        github.com/wolfogre/go-pprof-practice/animal/felidae/cat.(*Cat).Pee+0xa3        /Users/bytedance/projects/go-pprof-practice/animal/felidae/cat/cat.go:39</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x10027e5d7        github.com/wolfogre/go-pprof-practice/animal/felidae/cat.(*Cat).Live+0x37        /Users/bytedance/projects/go-pprof-practice/animal/felidae/cat/cat.go:19</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x10027faff        main.main+0xbf                                                                        /Users/bytedance/projects/go-pprof-practice/main.go:31</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x10008538b        runtime.main+0x2bb    ¬† ¬†</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>‚Ä¢ cycles/second=1000002977‚Äî‚ÄîÊòØÊØèÁßíÈíüÂØπÂ∫îÁöÑcpuÂë®ÊúüÊï∞. pprofÂú®ÂèçÊò†blockÊó∂ÈïøÊó∂Ôºå‰ª•cycle‰∏∫Âçï‰Ωç</p>
</li>
<li>
<p>‚Ä¢ 3002910915‚Äî‚ÄîÈòªÂ°ûÁöÑcycleÊï∞. ÂèØ‰ª•Êç¢ÁÆóÊàêÁßíÔºö3003307959/1000002977 ‚âà 3S</p>
</li>
<li>
<p>‚Ä¢ 3‚Äî‚ÄîÂèëÁîüÁöÑÈòªÂ°ûÊ¨°Êï∞</p>
</li>
</ul>
<p>‰∫éÊòØÊàë‰ª¨ÂÆö‰ΩçÂà∞ÂÖ∂‰∏≠‰∏ÄÂ§ÑÂºïËµ∑ÈòªÂ°ûÁöÑ‰ª£Á†ÅÊòØ Cat.PeeÔºåÊØèÂΩìÂáΩÊï∞Ë¢´Ë∞ÉÁî®Êó∂‰ºöÁÆÄÂçïÁ≤óÊö¥Âú∞Á≠âÂæÖ timer 1SÔºåÈáåÈù¢‰ºöÂõ†ËØª chan ËÄåÈô∑ÂÖ•ÈòªÂ°ûÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">Cat</span><span class="p">)</span> <span class="n">Pee</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">log</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">Name</span><span class="p">(),</span> <span class="s2">&#34;pee&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">&lt;-</span><span class="n">time</span><span class="o">.</span><span class="n">After</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mutexÂàÜÊûê">mutexÂàÜÊûê
</h3><p>mutex ÂàÜÊûêÁúãÁöÑÊòØÊüê‰∏™ goroutine ÊåÅÊúâÈîÅÁöÑÊó∂ÈïøÔºàmutex.Lock -&gt; mutex.Unlock ‰πãÈó¥ËøôÊÆµÊó∂Èó¥ÔºâÔºå‰∏îÂè™ÊúâÂú®Â≠òÂú®ÈîÅÁ´û‰∫âÂÖ≥Á≥ªÊó∂Êâç‰ºö‰∏äÊä•ËøôÈÉ®ÂàÜÊï∞ÊçÆ. pprof ÈªòËÆ§‰∏çÂºÄÂêØ mutex ÂàÜÊûêÔºåÈúÄË¶ÅÊòæÂºèÊâìÂºÄÂºÄÂÖ≥Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">runtime</span><span class="p">.</span><span class="nf">SetMutexProfileFraction</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ•ÂèÇÊéßÂà∂ÁöÑÊòØ mutex ÈááÊ†∑È¢ëÁéáÔºö</p>
<ul>
<li>
<p>‚Ä¢ 1‚Äî‚ÄîÂßãÁªàËøõË°åÈááÊ†∑</p>
</li>
<li>
<p>‚Ä¢ 0‚Äî‚ÄîÂÖ≥Èó≠‰∏çËøõË°åÈááÊ†∑</p>
</li>
<li>
<p>‚Ä¢ &lt;0‚Äî‚Äî‰∏çÊõ¥Êñ∞Ëøô‰∏™ÂÄºÔºåÂè™ÊòØÊää‰πãÂâçËÆæÁöÑÂÄºÁªìÊûúËØªÂá∫Êù•</p>
</li>
<li>
<p>‚Ä¢ Ëã• &gt;1 ‚Äî‚ÄîÊúâ 1/rate ÁöÑÊ¶ÇÁéá‰∏ãÁöÑ‰∫ã‰ª∂‰ºöË¢´ÈááÊ†∑</p>
</li>
</ul>
<p>ÁÇπÂáª mutex ËøõÂÖ• http://localhost:6060/debug/pprof/mutex?debug=1 È°µÈù¢Êü•Áúã‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">--- mutex:
</span></span><span class="line"><span class="cl">cycles/second<span class="o">=</span><span class="m">1000002767</span>
</span></span><span class="line"><span class="cl">sampling <span class="nv">period</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="m">4007486874</span> <span class="m">4</span> @ 0x1024e24d4 0x1024e2495 0x10231ca24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x1024e24d3        sync.(*Mutex).Unlock+0x73                                                                /usr/local/go/src/sync/mutex.go:223</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x1024e2494        github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Howl.func1+0x34        /Users/bytedance/projects/go-pprof-practice/animal/canidae/wolf/wolf.go:58</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>‚Ä¢ 1000002767‚Äî‚ÄîÊØèÁßí‰∏ãÁöÑ cycle Êï∞</p>
</li>
<li>
<p>‚Ä¢ 4007486874‚Äî‚ÄîÊåÅÊúâÈîÅÁöÑ cycle ÊÄªÊï∞</p>
</li>
<li>
<p>‚Ä¢ 4‚Äî‚ÄîÈááÊ†∑‰∫Ü 4 Ê¨°</p>
</li>
</ul>
<p>‰∫éÊòØÂÆö‰ΩçÂà∞Âç†ÊúâÈîÅËæÉÂ§öÁöÑÊñπÊ≥ïÊòØ Wolf.HowlÔºåÊØèÊ¨°Âä†ÈîÅÂêéÈÉΩÁù°‰∫Ü‰∏ÄÁßíÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="o">*</span><span class="nx">Wolf</span><span class="p">)</span><span class="w"> </span><span class="nf">Howl</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">w</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;howl&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">m</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">m</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">m</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="goroutineÂàÜÊûê">goroutineÂàÜÊûê
</h3><p>ÊúÄÂêéÈíàÂØπ goroutine ËøõË°åÂàÜÊûêÔºåÁÇπÂáª goroutine ËøõÂÖ•:</p>
<p>http://localhost:6060/debug/pprof/goroutine?debug=1È°µÈù¢Ëé∑Âèñ‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">goroutine profile: total <span class="m">173</span>
</span></span><span class="line"><span class="cl"><span class="m">150</span> @ 0x100a017e8 0x100a315ac 0x100bfa578 0x100a34a24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100a315ab        time.Sleep+0x10b                                                                        /usr/local/go/src/runtime/time.go:195</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100bfa577        github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Drink.func1+0x27        /Users/bytedance/projects/go-pprof-practice/animal/canidae/wolf/wolf.go:34</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">15</span> @ 0x100a017e8 0x100a315ac 0x100bfb6f0 0x100a34a24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100a315ab        time.Sleep+0x10b                                                                        /usr/local/go/src/runtime/time.go:195</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100bfb6ef        github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Pee.func1+0x2f        /Users/bytedance/projects/go-pprof-practice/animal/muridae/mouse/mouse.go:43</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖàÁúãÁ¨¨‰∏ÄË°åÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">goroutine profile: total 173
</span></span></code></pre></td></tr></table>
</div>
</div><p>total 173‚Äî‚ÄîÊÄªËÆ°Êúâ 173 ‰∏™ goroutine ÁÑ∂ÂêéËÉΩÂ§üÂÆö‰ΩçÂà∞Âá†‰∏™ÂàõÈÄ† goroutine Êï∞ÈáèËæÉÂ§ßÁöÑÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">150</span> @ 0x100a017e8 0x100a315ac 0x100bfa578 0x100a34a24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100a315ab        time.Sleep+0x10b                                                                        /usr/local/go/src/runtime/time.go:195</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100bfa577        github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Drink.func1+0x27        /Users/bytedance/projects/go-pprof-practice/animal/canidae/wolf/wolf.go:34</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">15</span> @ 0x100a017e8 0x100a315ac 0x100bfb6f0 0x100a34a24
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100a315ab        time.Sleep+0x10b                                                                        /usr/local/go/src/runtime/time.go:195</span>
</span></span><span class="line"><span class="cl"><span class="c1">#        0x100bfb6ef        github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Pee.func1+0x2f        /Users/bytedance/projects/go-pprof-practice/animal/muridae/mouse/mouse.go:43</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="o">*</span><span class="nx">Wolf</span><span class="p">)</span><span class="w"> </span><span class="nf">Drink</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">w</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;drink&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">30</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">m</span><span class="w"> </span><span class="o">*</span><span class="nx">Mouse</span><span class="p">)</span><span class="w"> </span><span class="nf">Pee</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nf">Name</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;pee&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">max</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">constant</span><span class="p">.</span><span class="nx">Gi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">slowBuffer</span><span class="p">)</span><span class="o">*</span><span class="nx">constant</span><span class="p">.</span><span class="nx">Mi</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">max</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">m</span><span class="p">.</span><span class="nx">slowBuffer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">slowBuffer</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">constant</span><span class="p">.</span><span class="nx">Mi</span><span class="p">]</span><span class="kt">byte</span><span class="p">{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">500</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ëá≥Ê≠§ÔºåÊàë‰ª¨Êää pprof ‰∏≠Â∏∏Áî®ÁöÑÊÄßËÉΩÂàÜÊûêÊµÅÁ®ã‰∏≤ËÅî‰∫Ü‰∏ÄÈÅçÔºåÂÆûÊàò demo Âà∞Ê≠§‰∏∫Ê≠¢.</p>
<h2 id="ÂÆûÁé∞ÂéüÁêÜ">ÂÆûÁé∞ÂéüÁêÜ
</h2><p>‰∏ãÈù¢ËøõÂÖ• pprof Ê∫êÁ†Å‰∏≠Êé¢ÂØªÂêÑÈ°πÊÄßËÉΩÊåáÊ†áÈááÈõÜÊµÅÁ®ãÁöÑÂÆûÁé∞ÂéüÁêÜ.</p>
<h3 id="pprof-init">pprof init
</h3><p>Âú®ÂÆûÊàòÊ°à‰æã‰∏≠ÔºåÊàë‰ª¨Ê≥®ÊÑèÂà∞Âè™ÈúÄË¶ÅÂåøÂêçÂØºÂÖ• pprof ÂåÖÂç≥ÂèØÂêØÁî®ÂäüËÉΩÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w">¬†</span><span class="p">(</span><span class="nx">_</span><span class="w">¬†</span><span class="s">&#34;net/http/pprof&#34;</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰πãÊâÄ‰ª•Â¶ÇÊ≠§ÔºåÊòØÂõ†‰∏∫Âú® pprof ÂåÖ‰∏ãÈÄöËøáÁöÑÂàùÂßãÂåñÂáΩÊï∞ÔºåÂêë net/http ÁöÑÈªòËÆ§ server‚Äî‚ÄîDefaultServerMux ‰∏≠ÂÆåÊàê‰∫Ü‰∏ÄÁ≥ªÂàóË∑ØÂæÑÂèäÂØπÂ∫î handler ÁöÑÊ≥®ÂÜåÔºåÊàë‰ª¨ÈáçÁÇπÂÖ≥Ê≥®‰∏ãÈù¢‰∏§‰∏™Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">pprof</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÁõÆÂΩïÈ°µ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/debug/pprof/&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">Index</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// cpu profile ÈááÊ†∑</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/debug/pprof/profile&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">Profile</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cpuÂàÜÊûêprofile">cpuÂàÜÊûê(profile)
</h3><p>È¶ñÂÖàÊù•ÁúãÁúã cpu ÂàÜÊûêÊµÅÁ®ãÔºåÂÖ∂ÂÆûÁé∞ÂéüÁêÜÊòØÔºö</p>
<ul>
<li>
<p>‚Ä¢ ÂàõÂª∫‰∏Ä‰∏™ timerÔºåÂÆöÊó∂Âêë go ËøõÁ®ã‰∏≠ÁöÑÂêÑ‰∏™ thread ÂèëÈÄÅ‰ø°Âè∑</p>
</li>
<li>
<p>‚Ä¢ thread Êé•Êî∂Âà∞‰ø°Âè∑ÂêéÔºå‰ºöÂ∞ÜËÆ∞ÂΩïÂΩìÂâçÂáΩÊï∞Ê†à‰ø°ÊÅØ</p>
</li>
<li>
<p>‚Ä¢ ÈÄöËøá‰∏Ä‰∏™ÂºÇÊ≠• goroutine ÊåÅÁª≠Êé•Êî∂ÂáΩÊï∞Ê†à‰ø°ÊÅØÔºåÂ∞ÜÂÖ∂ÂÜôÂÖ•Âà∞ cpu profile Êñá‰ª∂ËøîÂõûÁªôÁî®Êà∑</p>
</li>
</ul>
<p><img src="/img/ai/193caf134fb8e79d2887fc344a282f55.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Âú®ÂÖ∑‰ΩìÂÆûÁé∞‰∏äÔºåËØ•ÊµÅÁ®ãÂ§ÑÁêÜÂáΩÊï∞‰∏∫Ë∑ØÂæÑ &ldquo;/debug/pprof/profile&rdquo; ÂØπÂ∫îÁöÑ handler‚Äî‚ÄîProfileÔºö</p>
<ul>
<li>
<p>‚Ä¢ ÈªòËÆ§ÈááÊ†∑Êó∂Èïø‰∏∫ 30SÔºåÂèØ‰ª•ÈÄöËøá‰øÆÊîπ paramÔºöseconds Êù•ÊéßÂà∂Êó∂Èïø</p>
</li>
<li>
<p>‚Ä¢ Ë∞ÉÁî® StartCPUProfile ÊñπÊ≥ïÔºåÂêØÂä® timer</p>
</li>
<li>
<p>‚Ä¢ Sleep ÊåáÂÆöÊó∂ÈïøÂêéÔºåÁªìÊùüÊµÅÁ®ã</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">Profile</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// read seconds used to produce the profile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">sec</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseInt</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nf">FormValue</span><span class="p">(</span><span class="s">&#34;seconds&#34;</span><span class="p">),</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// default sec is 30S</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">sec</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">sec</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂºÄÂßãÁªüËÆ°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pprof</span><span class="p">.</span><span class="nf">StartCPUProfile</span><span class="p">(</span><span class="nx">w</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Áù°ÊåáÂÆöÊó∂Èïø</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">sleep</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nf">Duration</span><span class="p">(</span><span class="nx">sec</span><span class="p">)</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂÅúÊ≠¢ÁªüËÆ°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">pprof</span><span class="p">.</span><span class="nf">StopCPUProfile</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÂêØÂä® cpu ÁªüËÆ°ÁöÑÊñπÊ≥ï StartCPUProfile ‰∏≠Ôºö</p>
<ul>
<li>
<p>‚Ä¢ Ë∞ÉÁî® SetCPUProfileRate ÂÆåÊàê timer ÁöÑÂàõÂª∫</p>
</li>
<li>
<p>‚Ä¢ ÂºÇÊ≠•ÂêØÂä® writer goroutineÔºåËØªÂèñ cpu ÂáΩÊï∞Ê†à‰ø°ÊÅØÂÜôÂÖ•Âà∞ cpu profile ‰∏≠</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">StartCPUProfile</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂÆöÊó∂Âô®È¢ëÁéáÔºåÊØèÁßíÂèëÈÄÅ 100 Ê¨°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">hz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂéªÈáç</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">cpu</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nx">cpu</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">cpu</span><span class="p">.</span><span class="nx">done</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">cpu</span><span class="p">.</span><span class="nx">done</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nx">chanbool</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Double-check.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">cpu</span><span class="p">.</span><span class="nx">profiling</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;cpu profiling already in use&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">cpu</span><span class="p">.</span><span class="nx">profiling</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ËÆæÁΩÆ cpuProfileRate ÂèÇÊï∞ÔºåÊñπÊ≥ïÂÜÖÈÉ®‰ºöÂêØÂä®ÂÆöÊó∂Âô®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">SetCPUProfileRate</span><span class="p">(</span><span class="nx">hz</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂêØÂä®ÂÜôÊï∞ÊçÆ goroutine</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">go</span><span class="w"> </span><span class="nf">profileWriter</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">returnnil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êé•‰∏ãÊù•ÊµèËßà‰∏Ä‰∏ãÂàõÂª∫ timer ÂèëÈÄÅ‰ø°Âè∑ÁöÑÊµÅÁ®ãÔºåÂØπÂ∫î‰ø°Âè∑Á±ªÂûã‰∏∫ SIGPROFÔºåÁî± hz ÊéßÂà∂ÂèëÈÄÅÁöÑÈ¢ëÁéáÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">SetCPUProfileRate</span><span class="p">(</span><span class="nx">hz</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ë∞ÉÊï¥ hz ÁöÑÈòàÂÄºÔºåÂú® [0,1000000] ‰πãÈó¥</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">hz</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">hz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">hz</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="mi">1000000</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">hz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1000000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">setcpuprofilerate</span><span class="p">(</span><span class="nb">int32</span><span class="p">(</span><span class="nx">hz</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// setcpuprofilerate sets the CPU profiling rate to hz times per second.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// If hz &lt;= 0, setcpuprofilerate turns off CPU profiling.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">setcpuprofilerate</span><span class="p">(</span><span class="nx">hz</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">setThreadCPUProfiler</span><span class="p">(</span><span class="nx">hz</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">setThreadCPUProfiler</span><span class="p">(</span><span class="nx">hz</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">getg</span><span class="p">().</span><span class="nx">m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mp</span><span class="p">.</span><span class="nx">profilehz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">hz</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// hz ‰∏∫ 0 Êó∂Áõ¥Êé•ÈÄÄÂá∫</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">hz</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// If the goal was to disable profiling for this thread, then the job&#39;s done.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// hz ÊéßÂà∂ÊØèÁßíÂèëÈÄÅÂ§öÂ∞ëÊ¨° SIGPROF ‰ø°Âè∑</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÂàõÂª∫ÂÆöÊó∂Âô®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">spec</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">new</span><span class="p">(</span><span class="nx">itimerspec</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">spec</span><span class="p">.</span><span class="nx">it_value</span><span class="p">.</span><span class="nf">setNsec</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nf">fastrandn</span><span class="p">(</span><span class="nb">uint32</span><span class="p">(</span><span class="mf">1e9</span><span class="o">/</span><span class="nx">hz</span><span class="p">))))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">spec</span><span class="p">.</span><span class="nx">it_interval</span><span class="p">.</span><span class="nf">setNsec</span><span class="p">(</span><span class="mf">1e9</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nx">hz</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">timerid</span><span class="w"> </span><span class="kt">int32</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">sevp</span><span class="w"> </span><span class="nx">sigevent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">sevp</span><span class="p">.</span><span class="nx">notify</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">_SIGEV_THREAD_ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">sevp</span><span class="p">.</span><span class="nx">signo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">_SIGPROF</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">sevp</span><span class="p">.</span><span class="nx">sigev_notify_thread_id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">int32</span><span class="p">(</span><span class="nx">mp</span><span class="p">.</span><span class="nx">procid</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">ret</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">timer_create</span><span class="p">(</span><span class="nx">_CLOCK_THREAD_CPUTIME_ID</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">sevp</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">timerid</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">ret</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">timer_settime</span><span class="p">(</span><span class="nx">timerid</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">spec</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mp</span><span class="p">.</span><span class="nx">profileTimer</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">timerid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mp</span><span class="p">.</span><span class="nx">profileTimerValid</span><span class="p">.</span><span class="nf">Store</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ëá≥Ê≠§ÔºåÊàë‰ª¨Ê¢≥ÁêÜ‰∫Ü SIGPROF Êé¢Êµã‰ø°Âè∑ÊòØÂ¶Ç‰ΩïÂèëÂá∫ÁöÑÔºå‰∏ãÈù¢Êàë‰ª¨Â∞±Êù•ÁúãÁúã‰ø°Âè∑ÊòØÂ¶Ç‰ΩïË¢´Â§ÑÁêÜÁöÑ. Âú® go ËøõÁ®ãÂêØÂä®Êó∂Ôºå‰ºöÈíàÂØπ‰ø°Âè∑Ê≥®ÂÜåÂ•ΩÂØπÂ∫îÁöÑÂ§ÑÁêÜÂáΩÊï∞ÔºåÂØπÂ∫î‰ª£Á†Å‰Ωç‰∫é runtime/proc.goÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">mstartm0</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">initsig</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">initsig</span><span class="p">(</span><span class="nx">preinit</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">setsig</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="w"> </span><span class="nx">abi</span><span class="p">.</span><span class="nf">FuncPCABIInternal</span><span class="p">(</span><span class="nx">sighandler</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰ø°Âè∑Â§ÑÁêÜÂáΩÊï∞ sighander ÂÆö‰πâ‰∫é runtime/signal_unix.goÔºåÈíàÂØπ SIGPROF ‰∏ìÈó®Â§ÑÁêÜÔºåÂÖ∂‰∏≠ËØªÂèñÂπ∂ËæìÂá∫Á∫øÁ®ãÁöÑÂáΩÊï∞Ê†à‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">sighandler</span><span class="p">(</span><span class="nx">sig</span><span class="w"> </span><span class="kt">uint32</span><span class="p">,</span><span class="w"> </span><span class="nx">info</span><span class="w"> </span><span class="o">*</span><span class="nx">siginfo</span><span class="p">,</span><span class="w"> </span><span class="nx">ctxt</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">,</span><span class="w"> </span><span class="nx">gp</span><span class="w"> </span><span class="o">*</span><span class="nx">g</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÈíàÂØπ pprof ‰ø°Âè∑ËøõË°åÂ§ÑÁêÜ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">sig</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">_SIGPROF</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ÈíàÂØπ sigprof ‰ø°Âè∑ËøõË°åÂéªÈáç</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">delayedSignal</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nf">validSIGPROF</span><span class="p">(</span><span class="nx">mp</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nf">sigprof</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nf">sigpc</span><span class="p">(),</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nf">sigsp</span><span class="p">(),</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nf">siglr</span><span class="p">(),</span><span class="w"> </span><span class="nx">gp</span><span class="p">,</span><span class="w"> </span><span class="nx">mp</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">sigprof</span><span class="p">(</span><span class="nx">pc</span><span class="p">,</span><span class="w"> </span><span class="nx">sp</span><span class="p">,</span><span class="w"> </span><span class="nx">lr</span><span class="w"> </span><span class="kt">uintptr</span><span class="p">,</span><span class="w"> </span><span class="nx">gp</span><span class="w"> </span><span class="o">*</span><span class="nx">g</span><span class="p">,</span><span class="w"> </span><span class="nx">mp</span><span class="w"> </span><span class="o">*</span><span class="nx">m</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">u</span><span class="w"> </span><span class="nx">unwinder</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">stk</span><span class="w"> </span><span class="p">[</span><span class="nx">maxCPUProfStack</span><span class="p">]</span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">u</span><span class="p">.</span><span class="nf">initAt</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">n</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nf">tracebackPCs</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">u</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[</span><span class="nx">n</span><span class="p">:])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">prof</span><span class="p">.</span><span class="nx">hz</span><span class="p">.</span><span class="nf">Load</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">traceCPUSample</span><span class="p">(</span><span class="nx">gprof</span><span class="p">,</span><span class="w"> </span><span class="nx">pp</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[:</span><span class="nx">n</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">getg</span><span class="p">().</span><span class="nx">m</span><span class="p">.</span><span class="nx">mallocing</span><span class="o">--</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Êé•‰∏ãÊù•ÂÜçÁÆÄÂçïÁúã‰∏ÄÁúº writer goroutine ÊâÄÂÅöÁöÑ‰∫ãÊÉÖÔºöËΩÆËØ¢ËØªÂèñÂáΩÊï∞Ê†à‰ø°ÊÅØÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ÂÜôÂÖ• cpu profile Êñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// readProfile, provided by the runtime, returns the next chunk of</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// binary CPU profiling stack trace data, blocking until data is available.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// If profiling is turned off and all the profile data accumulated while it was</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// on has been returned, readProfile returns eof=true.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// The caller must save the returned data and tags before calling readProfile again.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">readProfile</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">[]</span><span class="kt">uint64</span><span class="p">,</span><span class="w"> </span><span class="nx">tags</span><span class="w"> </span><span class="p">[]</span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">,</span><span class="w"> </span><span class="nx">eof</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">profileWriter</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">newProfileBuilder</span><span class="p">(</span><span class="nx">w</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">tags</span><span class="p">,</span><span class="w"> </span><span class="nx">eof</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">readProfile</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">addCPUData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">tags</span><span class="p">);</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">e</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">eof</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">break</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nf">build</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">cpu</span><span class="p">.</span><span class="nx">done</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÄöÁî®-index-Â§ÑÁêÜ">ÈÄöÁî® index Â§ÑÁêÜ
</h3><p>Èô§‰∫Ü cpu ÂàÜÊûêÂ§ñÔºåÊé•‰∏ãÊù•Êàë‰ª¨Ë¶ÅËÅäÂà∞ÁöÑ heap„ÄÅblock„ÄÅmutex„ÄÅgoroutine ÂàÜÊûêÈÉΩÊòØÂ§çÁî® &ldquo;/debug/pprof/&rdquo; ÂØπÂ∫îÁöÑ handler‚Äî‚ÄîIndexÔºö</p>
<p><img src="/img/ai/43cb90c9fbbd53e3510631fd7fe7f914.png"
	
	
	
	loading="lazy"
	
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w">¬†</span><span class="nf">init</span><span class="p">()</span><span class="w">¬†</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/debug/pprof/&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">Index</span><span class="p">)</span><span class="w">¬† ¬†¬†
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøõÂÖ•ËØ• handler ÂêéÔºå‰ºö‰ªéËØ∑Ê±ÇË∑ØÂæÑ‰∏≠ÂèñÂá∫ÈúÄË¶ÅÈááÈõÜÁöÑÊåáÊ†áÁ±ªÂûãÔºåÁÑ∂ÂêéË∞ÉÁî®ÂØπÂ∫îÁöÑ profile Ê®°ÂùóËøõË°åÂ§ÑÁêÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">Index</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ëé∑ÂèñËÆøÈóÆÁöÑÂÖ∑‰Ωì indexÔºåÂ¶Ç heap„ÄÅblock„ÄÅmutex„ÄÅgoroutine Á≠â</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nf">CutPrefix</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;/debug/pprof/&#34;</span><span class="p">);</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nf">handler</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® pprof ‰∏≠ÔºåÈíàÂØπÂêÑÁ±ªÊåáÊ†á‰ºöÊèêÂâçÂàùÂßãÂåñÂØπÂ∫îÁöÑ profile Â§ÑÁêÜÊ®°ÂùóÔºåÂÖ∂‰∏≠ÁöÑ write ÂáΩÊï∞ÊòØÁî®‰∫éËæìÂá∫ÈááÈõÜ‰ø°ÊÅØÁöÑÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">lockProfiles</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">profiles</span><span class="p">.</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">profiles</span><span class="p">.</span><span class="nx">m</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Initial built-in profiles.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">profiles</span><span class="p">.</span><span class="nx">m</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;goroutine&#34;</span><span class="p">:</span><span class="w">    </span><span class="nx">goroutineProfile</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;threadcreate&#34;</span><span class="p">:</span><span class="w"> </span><span class="nx">threadcreateProfile</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;heap&#34;</span><span class="p">:</span><span class="w">         </span><span class="nx">heapProfile</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;allocs&#34;</span><span class="p">:</span><span class="w">       </span><span class="nx">allocsProfile</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;block&#34;</span><span class="p">:</span><span class="w">        </span><span class="nx">blockProfile</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;mutex&#34;</span><span class="p">:</span><span class="w">        </span><span class="nx">mutexProfile</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">goroutineProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;goroutine&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countGoroutine</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeGoroutine</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">heapProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;heap&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countHeap</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeHeap</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">blockProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;block&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countBlock</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeBlock</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">var</span><span class="w"> </span><span class="nx">mutexProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;mutex&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countMutex</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeMutex</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Áî®Êà∑ÈÄâÊã©Êü•ÁúãÊüêÁßçÁ±ªÂûãÁöÑÊåáÊ†á‰ø°ÊÅØÊó∂Ôºå‰æøÂèñÂá∫ÂØπÂ∫îÁöÑ profile Ê®°ÂùóÔºåË∞ÉÁî®ÂØπÂ∫îÁöÑ write ÂáΩÊï∞ËæìÂá∫‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="nx">handler</span><span class="p">)</span><span class="w"> </span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">w</span><span class="p">.</span><span class="nf">Header</span><span class="p">().</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;X-Content-Type-Options&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;nosniff&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">p</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">pprof</span><span class="p">.</span><span class="nf">Lookup</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">gc</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">strconv</span><span class="p">.</span><span class="nf">Atoi</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nf">FormValue</span><span class="p">(</span><span class="s">&#34;gc&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&#34;heap&#34;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">gc</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">GC</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">debug</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">strconv</span><span class="p">.</span><span class="nf">Atoi</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nf">FormValue</span><span class="p">(</span><span class="s">&#34;debug&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">w</span><span class="p">.</span><span class="nf">Header</span><span class="p">().</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Content-Type&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;text/plain; charset=utf-8&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">p</span><span class="p">.</span><span class="nf">WriteTo</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Lookup returns the profile with the given name, or nil if no such profile exists.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">Lookup</span><span class="p">(</span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">Profile</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">lockProfiles</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="nf">unlockProfiles</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">profiles</span><span class="p">.</span><span class="nx">m</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">Profile</span><span class="p">)</span><span class="w"> </span><span class="nf">WriteTo</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">write</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="heapblockmutex-‰ø°ÊÅØÂ≠òÂÇ®ÁªìÊûÑ">heap„ÄÅblock„ÄÅmutex ‰ø°ÊÅØÂ≠òÂÇ®ÁªìÊûÑ
</h3><p>ÈíàÂØπ‰∫é heap„ÄÅblock„ÄÅmutex ‰∏âÁ±ªÊåáÊ†áÔºåÂØπÂ∫î‰ø°ÊÅØÈÉΩÊòØÊèêÂâçÁîüÊàêÂ•ΩÔºåÂ≠òÂÇ®Âú®Êï∞ÊçÆÁ±ªÂûã‰∏∫ bucket ÁöÑÂÖ®Â±ÄÂèòÈáèÂΩì‰∏≠ÔºåÂÖ∂‰∏≠ bucket Á±ªÂûãÂÆö‰πâÊàêÊûö‰∏æÂÄºÔºåÂåÖÂê´ heap„ÄÅblock„ÄÅmutex ‰∏âÁ±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">const</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// profile types</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">memProfile</span><span class="w"> </span><span class="nx">bucketType</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kc">iota</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">blockProfile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mutexProfile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">type</span><span class="w"> </span><span class="nx">bucketType</span><span class="w"> </span><span class="kt">int</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>bucket ‰∏é bucket ‰πãÈó¥ÈÄöËøá allnext ÊåáÈíà‰∏≤ËÅîÂΩ¢ÊàêÈìæË°®ÔºåÈíàÂØπ heap„ÄÅblock„ÄÅmutex ‰∏âÁßçÁ±ªÂûãÔºåÂú®ÂÖ®Â±ÄÂêÑÊúâ‰∏Ä‰∏™ÂÖ®Â±ÄÈìæË°®Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mbuckets</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">UnsafePointer</span><span class="w"> </span><span class="c1">// *bucket, memory profile buckets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">bbuckets</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">UnsafePointer</span><span class="w"> </span><span class="c1">// *bucket, blocking profile buckets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">xbuckets</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">UnsafePointer</span><span class="w"> </span><span class="c1">// *bucket, mutex profile buckets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏ãÈù¢Êü•ÁúãÂÖ≥‰∫é bucket ÁöÑÂÖ∑‰ΩìÂÆö‰πâÔºå‰ª£Á†Å‰Ωç‰∫é runtime/mprof.go Êñá‰ª∂‰∏≠Ôºö</p>
<ul>
<li>
<p>‚Ä¢ allnextÔºöÊåáÂêëÁõ∏ÈÇª bucket ÁöÑÊåáÈíà</p>
</li>
<li>
<p>‚Ä¢ typÔºöbucket Á±ªÂûã</p>
</li>
<li>
<p>‚Ä¢ nstkÔºöÂ†ÜÊ†à‰ø°ÊÅØÊï∞ÁªÑÁöÑÂ§ßÂ∞èÔºåÈÄöËøáËØ•Â≠óÊÆµÁªìÂêàÂú∞ÂùÄÂÅèÁßªÁöÑÊñπÂºèÔºåËÉΩÂèñÂá∫Â†ÜÊ†à‰ø°ÊÅØÊï∞ÁªÑ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">bucket</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÊåáÂêëÈìæË°®Áõ∏ÈÇªËäÇÁÇπ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">allnext</span><span class="w"> </span><span class="o">*</span><span class="nx">bucket</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// bucket Á±ªÂûã  memory„ÄÅblock„ÄÅmutex</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">typ</span><span class="w">     </span><span class="nx">bucketType</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Âè™Âú® memory Á±ªÂûã‰ΩøÁî®ÔºåÊ†áËØÜÂàÜÈÖçÂÜÖÂ≠òÁöÑÂ§ßÂ∞è</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">size</span><span class="w">    </span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ËÆ∞ÂΩïÊ†à‰ø°ÊÅØÊï∞ÁªÑÁöÑÂ§ßÂ∞èÔºåÈÄöËøáÂú∞ÂùÄÂÅèÁßªÁöÑÊñπÂºèÂç≥ÂèØËé∑ÂèñÂà∞ÂÖ®ÈÉ®‰ø°ÊÅØ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">nstk</span><span class="w">    </span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>‰∫ãÂÆû‰∏äÔºåÊØè‰∏™ bucket ËøòÂ≠òÂú®‰∏ÄÈÉ®ÂàÜÁî®‰∫éÂÆûÈôÖËÆ∞ÂΩïÊåáÊ†á‰ø°ÊÅØÁöÑÈöêËóèÂÜÖÂÆπÔºåÊ†πÊçÆ bucket Á±ªÂûãÁöÑÂ∑ÆÂºÇÔºåÂèØËÉΩÊòØÔºö</p>
<ul>
<li>
<p>‚Ä¢ memRecord‚Äî‚ÄîheapBucket</p>
</li>
<li>
<p>‚Ä¢ blockRecord‚Äî‚ÄîblockBucket/mutexBucket</p>
</li>
</ul>
<p>È¶ñÂÖà‰ª• heapBucket ‰∏∫‰æãÔºåÊàë‰ª¨Êü•Áúã‰∏ãÂõæÔºö</p>
<p><img src="/img/ai/efac6306a2549ea84337efc084316f2f.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>heapBucket ÈÄöËøáÂú∞ÂùÄÂÅèÁßªÁöÑÊñπÂºèÔºåËÉΩÂ§üÂèñÂá∫ stk Â†ÜÊ†à‰ø°ÊÅØÊï∞ÁªÑ‰ª•Âèä memRecord ÂÆû‰æãÁöÑÂÜÖÂÆπÔºåÂÖ∂Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>
<p>‚Ä¢ activeÔºöÂú®ËæìÂá∫ memProfile ÁªìÊûúÊó∂Ôºå‰∏¥Êó∂Â≠òÂÇ®ÊøÄÊ¥ªÊÄÅ memRecordCycle ÂÆû‰æãÊó∂‰ΩøÁî®ÁöÑÊï∞ÊçÆÁªìÊûÑ</p>
</li>
<li>
<p>‚Ä¢ futureÔºöÈïøÂ∫¶‰∏∫ 3 ÁöÑmemRecordCycle Êï∞ÁªÑÔºåÊ†πÊçÆ gc Âë®Êúü‰ºöËΩÆÊç¢‰ΩøÁî®ÂÖ∂‰∏≠‰∏çÂêåÁöÑ index</p>
</li>
</ul>
<p>ÂÖ∂‰∏≠ÁúüÊ≠£ËÆ∞ÂΩïÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØÁöÑÊï∞ÊçÆÁªìÊûÑÊòØ memRecordCycleÔºö</p>
<ul>
<li>
<p>‚Ä¢ allocsÔºöÂÜÖÂ≠òÂàÜÈÖçÊ¨°Êï∞</p>
</li>
<li>
<p>‚Ä¢ freesÔºöÂÜÖÂ≠òÈáäÊîæÊ¨°Êï∞</p>
</li>
<li>
<p>‚Ä¢ alloc_bytesÔºöÂÜÖÂ≠òÂàÜÈÖçÂ§ßÂ∞èÔºàbyteÔºâ</p>
</li>
<li>
<p>‚Ä¢ free_bytesÔºöÂÜÖÂ≠òÈáäÊîæÂ§ßÂ∞èÔºàbyteÔºâ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">memRecord</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// The following complex 3-stage scheme of stats accumulation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// is required to obtain a consistent picture of mallocs and frees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// for some point in time.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// The problem is that mallocs come in real time, while frees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// come only after a GC during concurrent sweeping. So if we would</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// naively count them, we would get a skew toward mallocs.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    // Hence, we delay information to get consistent snapshots as</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// of mark termination. Allocations count toward the next mark</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// termination&#39;s snapshot, while sweep frees count toward the</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// previous mark termination&#39;s snapshot:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    //              MT          MT          MT          MT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//             .¬∑|         .¬∑|         .¬∑|         .¬∑|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//          .¬∑Àô  |      .¬∑Àô  |      .¬∑Àô  |      .¬∑Àô  |</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//       .¬∑Àô     |   .¬∑Àô     |   .¬∑Àô     |   .¬∑Àô     |</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//    .¬∑Àô        |.¬∑Àô        |.¬∑Àô        |.¬∑Àô        |</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    //       alloc ‚Üí ‚ñ≤ ‚Üê free</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//               ‚î†‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//       C+2     ‚Üí    C+1    ‚Üí  C</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    //                   alloc ‚Üí ‚ñ≤ ‚Üê free</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//                           ‚î†‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖ‚îÖP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//                   C+2     ‚Üí    C+1    ‚Üí  C</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    // Since we can&#39;t publish a consistent snapshot until all of</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// the sweep frees are accounted for, we wait until the next</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// mark termination (&#34;MT&#34; above) to publish the previous mark</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// termination&#39;s snapshot (&#34;P&#34; above). To do this, allocation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// and free events are accounted to *future* heap profile</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// cycles (&#34;C+n&#34; above) and we only publish a cycle once all</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// of the events from that cycle must be done. Specifically:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    // Mallocs are accounted to cycle C+2.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Explicit frees are accounted to cycle C+2.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// GC frees (done during sweeping) are accounted to cycle C+1.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    // After mark termination, we increment the global heap</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// profile cycle counter and accumulate the stats from cycle C</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// into the active profile.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// active is the currently published profile. A profiling</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// cycle can be accumulated into active once its complete.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">active</span><span class="w"> </span><span class="nx">memRecordCycle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// future records the profile events we&#39;re counting for cycles</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// that have not yet been published. This is ring buffer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// indexed by the global heap profile cycle C and stores</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// cycles C, C+1, and C+2. Unlike active, these counts are</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// only for a single cycle; they are not cumulative across</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// cycles.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">    // We store cycle C here because there&#39;s a window between when</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// C becomes the active cycle and when we&#39;ve flushed it to</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// active.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">future</span><span class="w"> </span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="nx">memRecordCycle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// memRecordCycle</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">type</span><span class="w"> </span><span class="nx">memRecordCycle</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">allocs</span><span class="p">,</span><span class="w"> </span><span class="nx">frees</span><span class="w">           </span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">alloc_bytes</span><span class="p">,</span><span class="w"> </span><span class="nx">free_bytes</span><span class="w"> </span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåËß£Èáä‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàÈúÄË¶Å‰ΩøÁî® future Êï∞ÁªÑÊù•ËΩÆÊç¢ËÆ∞ÂΩïÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØ. ËøôÊòØÂõ†‰∏∫ÂÜÖÂ≠òÂàÜÈÖç‰∏é gc ÂõûÊî∂ÊòØ‰∏Ä‰∏™È¢ëÁπÅ‰∫§ÊõøÁöÑËøáÁ®ãÔºå‰∏∫‰∫ÜÈÅøÂÖçËÆ∞ÂΩïÊï∞ÊçÆÁöÑÊäñÂä®Ôºåpprof ‰ºöÈíàÂØπÁªèÂéÜËøá‰∏ÄËΩÆ gc Âë®ÊúüÁöÑÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØËøõË°åËæìÂá∫Ôºå‰∫éÊòØ‰æøËÆæËÆ°‰∫ÜËøôÊ†∑‰∏Ä‰∏™ future Êï∞ÁªÑÁöÑÁªìÊûÑÔºåÂπ∂ÈÄöËøáÈÄíÂ¢ûÁöÑ gc Âë®ÊúüÊù•ËÆ°ÁÆóÂæóÂà∞ index ÂÄºÂπ∂‰ªé future Êï∞ÁªÑ‰∏≠ÂèñÂá∫ÂØπÂ∫îÁöÑ memRecordCycle ÂÆû‰æã.</p>
<p>ÂØπ‰∫é blockBucket ÊàñËÄÖ mutexBucketÔºåÂÖ∂Â∫ïÂ±ÇÈÉΩÊòØ‰ΩøÁî®ÁöÑ blockRecordÔºö</p>
<p><img src="/img/ai/efe86315a5c8ebaf7a0231ff7cec7bf0.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ÂÖ∂‰∏≠ blockRecord ÁªìÊûÑÂÆö‰πâÊØîËæÉÁÆÄÂçïÔºåÂàÜÂà´ËÆ∞ÂΩï‰∫ÜÂèëÁîüÈòªÂ°û/Âä†ÈîÅÁöÑÊ¨°Êï∞‰ª•ÂèäÊó∂ÈïøÔºà‰ª• cycle ‰∏∫Âçï‰ΩçÔºâ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// A blockRecord is the bucket data for a bucket of type blockProfile,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// which is used in blocking and mutex profiles.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">type</span><span class="w"> </span><span class="nx">blockRecord</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÈòªÂ°ûÊ¨°Êï∞</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="w">  </span><span class="kt">float64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÈòªÂ°ûÁöÑÂë®ÊúüÊï∞</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">cycles</span><span class="w"> </span><span class="kt">int64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöÁî®ÁöÑ bucket ÂÆû‰æãÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>
<p>‚Ä¢ Ê†πÊçÆ bucketType Á°ÆÂÆö bucket Á±ªÂûã</p>
</li>
<li>
<p>‚Ä¢ ÈÅçÂéÜÁõ∏Â∫îÁ±ªÂûãÁöÑ bucket ÈìæË°®ÔºåÂ∞ùËØïÂ§çÁî® bucket ÂÆû‰æãÔºàÂ¶ÇÊûú size ÂíåÂ†ÜÊ†à‰ΩçÁΩÆ‰∏ÄËá¥ÔºåÂàôÂèØ‰ª•Â§çÁî®Áõ∏Âêå bucket ÂÆû‰æãÔºâ</p>
</li>
<li>
<p>‚Ä¢ Â¶ÇÊûúÊó†Ê≥ïÂ§çÁî®ÔºåÂàôÊûÑÈÄ†Êñ∞ÁöÑ bucket ÂÆû‰æãÔºåÂπ∂‰∏îÂ∞ÜÂÖ∂Ê∑ªÂä†Âà∞ÂÖ®Â±ÄÁöÑ bucket ÈìæË°®ÂΩì‰∏≠</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Return the bucket for stk[0:nstk], allocating new bucket if needed.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">stkbucket</span><span class="p">(</span><span class="nx">typ</span><span class="w"> </span><span class="nx">bucketType</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="kt">uintptr</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="w"> </span><span class="p">[]</span><span class="kt">uintptr</span><span class="p">,</span><span class="w"> </span><span class="nx">alloc</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">bucket</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Â¶ÇÊûúÂ≠òÂú® bucket ÂÆû‰æãÊâøÊé•ÁöÑ size ‰ª•Âèä stk Â†ÜÊ†à‰ΩçÁΩÆ‰∏ÄËá¥ÁöÑÔºåÂàôÁõ¥Êé•ËøõË°åÂ§çÁî®Âç≥ÂèØ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nx">bh</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nf">Load</span><span class="p">());</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">next</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">typ</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">hash</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">h</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nf">eqslice</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nf">stk</span><span class="p">(),</span><span class="w"> </span><span class="nx">stk</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profInsertLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">b</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create new bucket.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">newBucket</span><span class="p">(</span><span class="nx">typ</span><span class="p">,</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">stk</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nb">copy</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nf">stk</span><span class="p">(),</span><span class="w"> </span><span class="nx">stk</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">h</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">size</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">allnext</span><span class="w"> </span><span class="o">*</span><span class="nx">atomic</span><span class="p">.</span><span class="nx">UnsafePointer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">memProfile</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">allnext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">mbuckets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="nx">elseif</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">mutexProfile</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">allnext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">xbuckets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">allnext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">bbuckets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">next</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nx">bh</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nf">Load</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nx">allnext</span><span class="p">.</span><span class="nf">Load</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">allnext</span><span class="p">.</span><span class="nf">StoreNoWB</span><span class="p">(</span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá newBucket ÊñπÊ≥ïÂèØ‰ª•ÁúãÂà∞ÔºåÊØè‰∏™ bucket ÂÆû‰æãÁöÑÊÄªÂ§ßÂ∞èÂåÖÂê´Âá†ÈÉ®ÂàÜÔºö</p>
<ul>
<li>
<p>‚Ä¢ bucket ÂÆû‰æãÊú¨Ë∫´ÁöÑÂ§ßÂ∞è‚Äî‚Äîunsafe.Sizeof(bucket{})</p>
</li>
<li>
<p>‚Ä¢ Â†ÜÊ†àÊï∞ÁªÑÂ§ßÂ∞è‚Äî‚Äînstk</p>
</li>
<li>
<p>‚Ä¢ ‰∏çÂêåÁ±ªÂûãÂØπÂ∫î bucketRecord Â§ßÂ∞è‚Äî‚Äîunsafe.Sizeof(memRecord{})/unsafe.Sizeof(blockRecord{})</p>
</li>
</ul>
<p>Ê≠£ÊòØÂü∫‰∫éËøôÊ†∑ÁöÑËÆæËÆ°ÔºåÊâçËÉΩÂ§üÈÄöËøáÂú∞ÂùÄÂÅèÁßªÁöÑÊñπÂºèÔºåÂèñÂá∫Â†ÜÊ†àÊï∞ÁªÑ stk ÊàñËÄÖ bucketRecord ÂÆû‰æã.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// newBucket allocates a bucket with the given type and number of stack entries.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">newBucket</span><span class="p">(</span><span class="nx">typ</span><span class="w"> </span><span class="nx">bucketType</span><span class="p">,</span><span class="w"> </span><span class="nx">nstk</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">bucket</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">size</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Sizeof</span><span class="p">(</span><span class="nx">bucket</span><span class="p">{})</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">uintptr</span><span class="p">(</span><span class="nx">nstk</span><span class="p">)</span><span class="o">*</span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Sizeof</span><span class="p">(</span><span class="nb">uintptr</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">throw</span><span class="p">(</span><span class="s">&#34;invalid profile bucket type&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nx">memProfile</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">size</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Sizeof</span><span class="p">(</span><span class="nx">memRecord</span><span class="p">{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nx">blockProfile</span><span class="p">,</span><span class="w"> </span><span class="nx">mutexProfile</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">size</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Sizeof</span><span class="p">(</span><span class="nx">blockRecord</span><span class="p">{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nf">persistentalloc</span><span class="p">(</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">memstats</span><span class="p">.</span><span class="nx">buckhash_sys</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">typ</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">typ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="p">.</span><span class="nx">nstk</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">uintptr</span><span class="p">(</span><span class="nx">nstk</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">b</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂÜÖÂ≠òÂàÜÊûêheap">ÂÜÖÂ≠òÂàÜÊûêÔºàheapÔºâ
</h3><p>‰∏ãÈù¢Êàë‰ª¨ÁúãÁúãÔºåÊúâÂÖ≥ÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØÊòØ‰ΩïÊó∂Ë¢´‰∏äÊä•ÂÜôÂÖ•Âà∞ bucket ÂΩì‰∏≠ÁöÑÔºö</p>
<p><img src="/img/ai/d31a6bf105a5eba9b8d101c79e4af06d.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Âú® go ‰∏≠ÔºåÊûÑÈÄ†‰∏ÄÂàáÂØπË±°ÂÖ∂Â∫ïÂ±ÇÈÉΩ‰ºöÈÄîÂæÑÂà∞‰Ωç‰∫é runtime/malloc.go Êñá‰ª∂ÁöÑ mallocgc ÊñπÊ≥ï. Âú®ËØ•ÊñπÊ≥ï‰∏≠È¢ÑÁïô‰∫Ü‰∏Ä‰∏™‰∏äÊä•Ê°©ÁÇπ‚Äî‚ÄîÂΩìÁ¥ØËÆ°ÂàÜÈÖçÁ∫¶ MemProfileRateÔºàÈªòËÆ§512KBÔºâÁöÑÂÜÖÂ≠òÊó∂Ôºå‰ºöÈááÊ†∑ËÆ∞ÂΩïÂΩìÊ¨°ÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØÔºåÊ≠•ÂÖ•Âà∞ profilealloc ÊñπÊ≥ï‰∏≠Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Allocate an object of size bytes.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Small objects are allocated from the per-P cache&#39;s free lists.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// Large objects (&gt; 32 kB) are allocated straight from the heap.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">mallocgc</span><span class="p">(</span><span class="nx">size</span><span class="w"> </span><span class="kt">uintptr</span><span class="p">,</span><span class="w"> </span><span class="nx">typ</span><span class="w"> </span><span class="o">*</span><span class="nx">_type</span><span class="p">,</span><span class="w"> </span><span class="nx">needzero</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">MemProfileRate</span><span class="p">;</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Note cache c only valid while m acquired; see #47302</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">nextSample</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">c</span><span class="p">.</span><span class="nx">nextSample</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="nx">size</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nf">profilealloc</span><span class="p">(</span><span class="nx">mp</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•ÊµÅÁ®ãÊúÄÁªà‰ºöË∞ÉÁî®Âà∞‰Ωç‰∫é runtime/mprof.go ÁöÑ mProf_Malloc ÊñπÊ≥ïÔºö</p>
<ul>
<li>
<p>‚Ä¢ Ë∞ÉÁî® callers ÊñπÊ≥ïËé∑ÂèñÂà∞ÂΩìÂâçÂ†ÜÊ†à‰ø°ÊÅØ</p>
</li>
<li>
<p>‚Ä¢ ËØªÂèñ gc Âë®ÊúüÊï∞ÔºàÂÖ®Â±ÄÂèòÈáè‚Äî‚ÄîmProfCycleÔºâÔºåÁ°ÆÂÆö‰ΩøÁî®ÁöÑ memRecord future index</p>
</li>
<li>
<p>‚Ä¢ Ë∞ÉÁî® stkbucketÔºåËé∑Âèñ‰∏Ä‰∏™ memBucket ÂÆû‰æã</p>
</li>
<li>
<p>‚Ä¢ ÂèñÂá∫ memRecord ‰∏≠ÊåáÂÆö index ‰∏ãÁöÑ memRecordCycle ÂÆû‰æã</p>
</li>
<li>
<p>‚Ä¢ Êõ¥Êñ∞ÂÜÖÂ≠òÂàÜÈÖçÊ¨°Êï∞‰ª•ÂèäÂàÜÈÖçÂ§ßÂ∞è‰ø°ÊÅØ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Called by malloc to record a profiled block.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">mProf_Malloc</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="kt">uintptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">stk</span><span class="w"> </span><span class="p">[</span><span class="nx">maxStack</span><span class="p">]</span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">nstk</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">callers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[:])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">index</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">mProfCycle</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nb">uint32</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">memRecord</span><span class="p">{}.</span><span class="nx">future</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">stkbucket</span><span class="p">(</span><span class="nx">memProfile</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[:</span><span class="nx">nstk</span><span class="p">],</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">mp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mpc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">mp</span><span class="p">.</span><span class="nx">future</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemFutureLock</span><span class="p">[</span><span class="nx">index</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mpc</span><span class="p">.</span><span class="nx">allocs</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mpc</span><span class="p">.</span><span class="nx">alloc_bytes</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">size</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemFutureLock</span><span class="p">[</span><span class="nx">index</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">systemstack</span><span class="p">(</span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">setprofilebucket</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âè¶‰∏ÄÊñπÈù¢ÔºåÂú®‰∏¥Ëøë‰∏ÄËΩÆ gc ÁªìÊùüÁöÑÊ∏ÖÊâ´Èò∂ÊÆµÔºå‰ºöË∞ÉÁî® mProf_Free ÊñπÊ≥ïÔºåÂÖ∂‰∏≠‰πü‰ºöÂèñÂá∫ memRecord ‰∏≠ÂØπÂ∫î‰∫é gc Âë®ÊúüÊï∞ÁöÑ memRecordCycle ÂÆû‰æãÔºåÊõ¥Êñ∞ÂÜÖÂ≠òÈáäÊîæ‰ø°ÊÅØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Called when freeing a profiled block.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">mProf_Free</span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">bucket</span><span class="p">,</span><span class="w"> </span><span class="nx">size</span><span class="w"> </span><span class="kt">uintptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">index</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="nx">mProfCycle</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nb">uint32</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">memRecord</span><span class="p">{}.</span><span class="nx">future</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">mp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mpc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">mp</span><span class="p">.</span><span class="nx">future</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemFutureLock</span><span class="p">[</span><span class="nx">index</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mpc</span><span class="p">.</span><span class="nx">frees</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">mpc</span><span class="p">.</span><span class="nx">free_bytes</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">size</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemFutureLock</span><span class="p">[</span><span class="nx">index</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÁî®Êà∑ÁÇπÂáª heap ËøõÂÖ•Âà∞ÂÜÖÂ≠òÂàÜÊûêÈ°µÈù¢Êó∂Ôºå‰ºöÊ≠•ÂÖ• heapProfile ÁöÑ writeHeap ÊµÅÁ®ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">heapProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;heap&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countHeap</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeHeap</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// writeHeap writes the current runtime heap profile to w.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">writeHeap</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">writeHeapInternal</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">writeHeapInternal</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">defaultSampleType</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">MemProfileRecord</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">MemProfile</span><span class="p">(</span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Allocate room for a slightly bigger profile,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// in case a few more entries have been added</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// since the call to MemProfile.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">make</span><span class="p">([]</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">MemProfileRecord</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="o">+</span><span class="mi">50</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">runtime</span><span class="p">.</span><span class="nf">MemProfile</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nx">n</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">break</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Profile grew; try again.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•ÊµÅÁ®ã‰ºöÈÅçÂéÜÊØè‰∏™ memBucketÔºåÊ†πÊçÆ gc Âë®ÊúüÊï∞Á°ÆÂÆö‰ΩøÁî®ÁöÑ memRecordCycle IndexÔºàÂú® mProf_FlushLocked ÊñπÊ≥ï‰∏≠Â∞ÜÊåáÂÆö index ÁöÑ memRecordCycle ÂÆû‰æãÊîæÂà∞ active ÂÆπÂô®‰∏≠ÔºâÔºåÁÑ∂ÂêéËé∑ÂèñÂà∞ÂÜÖÂ≠òÂàÜÈÖçÁöÑ‰ø°ÊÅØËøõË°åÊ±áÊÄª.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">MemProfile</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">MemProfileRecord</span><span class="p">,</span><span class="w"> </span><span class="nx">inuseZero</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">cycle</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">mProfCycle</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// If we&#39;re between mProf_NextCycle and mProf_Flush, take care</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// of flushing to the active profile so we only have to look</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// at the active profile below.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">index</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">cycle</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nb">uint32</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">memRecord</span><span class="p">{}.</span><span class="nx">future</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">mProf_FlushLocked</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">idx</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">head</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">mp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">mp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">inuseZero</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">mp</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">alloc_bytes</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nx">mp</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">free_bytes</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nf">record</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">p</span><span class="p">[</span><span class="nx">idx</span><span class="p">],</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">idx</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemActiveLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// mProf_FlushLocked flushes the events from the heap profiling cycle at index</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">mProf_FlushLocked</span><span class="p">(</span><span class="nx">index</span><span class="w"> </span><span class="kt">uint32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">assertLockHeld</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemActiveLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">assertLockHeld</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profMemFutureLock</span><span class="p">[</span><span class="nx">index</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">head</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nx">mbuckets</span><span class="p">.</span><span class="nf">Load</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">head</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">mp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">mp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Flush cycle C into the published profile and clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// it for reuse.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">mpc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">mp</span><span class="p">.</span><span class="nx">future</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">mp</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">mpc</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">*</span><span class="nx">mpc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">memRecordCycle</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="block-ÂàÜÊûê">block ÂàÜÊûê
</h3><p>‰∏ãÈù¢‰∏≤‰∏Ä‰∏ã block ‰ø°ÊÅØ‰∏äÊä•Âà∞ blockBucket ÁöÑÊµÅÁ®ãÔºö</p>
<p><img src="/img/ai/450544a62b335e6234251b9d06986aaa.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>‰ª• channel ‰∏∫‰æãÔºåÂΩìÊüê‰∏™ goroutine ËØªÂèñ‰∏Ä‰∏™Á©∫ channel Êó∂‰ºöÈô∑ÂÖ•ÈòªÂ°ûÔºàgoparkÔºâÔºåÈöèÂêéÂΩìÊúâÊï∞ÊçÆ‰∫ßÁîüÊó∂ÔºåËØ• goroutine Âæó‰ª•Âî§ÈÜíÔºåÊ≠§Êó∂‰ºöË∞ÉÁî®È¢ÑÁïôÁöÑ‰∏äÊä•Ê°©ÁÇπÔºàblockevent ÂáΩÊï∞ÔºâËøõË°å block ‰ø°ÊÅØ‰∏äÊä•. ÂØπÂ∫î‰ª£Á†Å‰Ωç‰∫é runtime/chan.goÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// ËØª channel</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">chanrecv</span><span class="p">(</span><span class="nx">c</span><span class="w"> </span><span class="o">*</span><span class="nx">hchan</span><span class="p">,</span><span class="w"> </span><span class="nx">ep</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">,</span><span class="w"> </span><span class="nx">block</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">selected</span><span class="p">,</span><span class="w"> </span><span class="nx">received</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Âõ†Êó†Êï∞ÊçÆÂèØËØªËÄåÈô∑ÂÖ•ÈòªÂ°û</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">gopark</span><span class="p">(</span><span class="nx">chanparkcommit</span><span class="p">,</span><span class="w"> </span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">c</span><span class="p">.</span><span class="nx">lock</span><span class="p">),</span><span class="w"> </span><span class="nx">waitReasonChanReceive</span><span class="p">,</span><span class="w"> </span><span class="nx">traceBlockChanRecv</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ë¢´Âî§ÈÜí</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Â∞ùËØïËÆ∞ÂΩï‰∏äÊä• block ‰∫ã‰ª∂</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">mysg</span><span class="p">.</span><span class="nx">releasetime</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">blockevent</span><span class="p">(</span><span class="nx">mysg</span><span class="p">.</span><span class="nx">releasetime</span><span class="o">-</span><span class="nx">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">blockevent</span><span class="p">(</span><span class="nx">cycles</span><span class="w"> </span><span class="kt">int64</span><span class="p">,</span><span class="w"> </span><span class="nx">skip</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">cycles</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">cycles</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">rate</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nx">atomic</span><span class="p">.</span><span class="nf">Load64</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">blockprofilerate</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nf">blocksampled</span><span class="p">(</span><span class="nx">cycles</span><span class="p">,</span><span class="w"> </span><span class="nx">rate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">saveblockevent</span><span class="p">(</span><span class="nx">cycles</span><span class="p">,</span><span class="w"> </span><span class="nx">rate</span><span class="p">,</span><span class="w"> </span><span class="nx">skip</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">blockProfile</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® blockevent ‰∏≠ÔºåË∞ÉÁî® blocksampled ÊñπÊ≥ïÁ°ÆÂÆöÊòØÂê¶ÈúÄË¶ÅÊåáÂÆöÊú¨Ê¨°‰∏äÊä•Âä®‰ΩúÔºàÂëºÂ∫î1.4Â∞èËäÇ‰∏≠ÂÖ≥‰∫éruntime.SetBlockProfileRateÊñπÊ≥ïÁöÑË∞ÉÁî®ËÆæÂÆöÔºâÔºö</p>
<ul>
<li>
<p>‚Ä¢ Â¶ÇÊûú rate &lt;=0ÔºåÂàô‰∏ç‰∏äÊä•</p>
</li>
<li>
<p>‚Ä¢ Â¶ÇÊûú rate ‰∏∫ 1ÔºåÂàôÊØèÊ¨°ÈÉΩ‰∏äÊä•</p>
</li>
<li>
<p>‚Ä¢ Â¶ÇÊûú rate &gt; 1</p>
</li>
<li>
<p>‚Ä¢ ÂΩì block_duration &gt;= rateÔºåÂàôÊØèÊ¨°ÈÉΩ‰∏äÊä•</p>
</li>
<li>
<p>‚Ä¢ Âê¶ÂàôÊúâ block_duration/rate ÁöÑÊ¶ÇÁéáËøõË°å‰∏äÊä•</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// blocksampled returns true for all events where cycles &gt;= rate. Shorter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// events have a cycles/rate random chance of returning true.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">blocksampled</span><span class="p">(</span><span class="nx">cycles</span><span class="p">,</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="kt">int64</span><span class="p">)</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="nx">rate</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="nx">cycles</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nf">fastrand</span><span class="p">())</span><span class="o">%</span><span class="nx">rate</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="nx">cycles</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÈÄöËøáÈ¢ëÊéßÊ†°È™åÔºåÁ°ÆÂÆöË¶ÅÊâßË°å‰∏äÊä•ÂêéÔºåÂàôËøõÂÖ• saveblockevent ÊñπÊ≥ïÔºö</p>
<ul>
<li>
<p>‚Ä¢ Ë∞ÉÁî® callers ÊñπÊ≥ïÂèñÂæóÂ†ÜÊ†à‰ø°ÊÅØ skt</p>
</li>
<li>
<p>‚Ä¢ Ë∞ÉÁî® stkbucket ÂèñÂæó‰∏Ä‰∏™ blockBucket ÂÆû‰æã</p>
</li>
<li>
<p>‚Ä¢ ÂèñÂá∫ÂÖ∂‰∏≠ÁöÑ bucketRecordÔºåÊõ¥Êñ∞ÈòªÂ°û‰ø°ÊÅØ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">saveblockevent</span><span class="p">(</span><span class="nx">cycles</span><span class="p">,</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="kt">int64</span><span class="p">,</span><span class="w"> </span><span class="nx">skip</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="nx">bucketType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">gp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">getg</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">nstk</span><span class="w"> </span><span class="kt">int</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">stk</span><span class="w"> </span><span class="p">[</span><span class="nx">maxStack</span><span class="p">]</span><span class="kt">uintptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">gp</span><span class="p">.</span><span class="nx">m</span><span class="p">.</span><span class="nx">curg</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">gp</span><span class="p">.</span><span class="nx">m</span><span class="p">.</span><span class="nx">curg</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">gp</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">nstk</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">callers</span><span class="p">(</span><span class="nx">skip</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[:])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">nstk</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">gcallers</span><span class="p">(</span><span class="nx">gp</span><span class="p">.</span><span class="nx">m</span><span class="p">.</span><span class="nx">curg</span><span class="p">,</span><span class="w"> </span><span class="nx">skip</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[:])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">stkbucket</span><span class="p">(</span><span class="nx">which</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">stk</span><span class="p">[:</span><span class="nx">nstk</span><span class="p">],</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">bp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">bp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profBlockLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">blockProfile</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">cycles</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Remove sampling bias, see discussion on http://golang.org/cl/299991.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">bp</span><span class="p">.</span><span class="nx">count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nb">float64</span><span class="p">(</span><span class="nx">rate</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">float64</span><span class="p">(</span><span class="nx">cycles</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">bp</span><span class="p">.</span><span class="nx">cycles</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">rate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="nx">elseif</span><span class="w"> </span><span class="nx">which</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">mutexProfile</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">bp</span><span class="p">.</span><span class="nx">count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nb">float64</span><span class="p">(</span><span class="nx">rate</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">bp</span><span class="p">.</span><span class="nx">cycles</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">cycles</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">bp</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">bp</span><span class="p">.</span><span class="nx">cycles</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">cycles</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profBlockLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂΩìÁî®Êà∑ÁÇπÂáªÊü•Áúã block ‰ø°ÊÅØÊó∂ÔºåÂàôËµ∞ÂÖ•Âà∞ blockProfile ÁöÑ writeBlock ÊµÅÁ®ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">blockProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;block&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countBlock</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeBlock</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// writeBlock writes the current blocking profile to w.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">writeBlock</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">writeProfileInternal</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;contention&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">runtime</span><span class="p">.</span><span class="nx">BlockProfile</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// writeProfileInternal writes the current blocking or mutex profile depending on the passed parameters.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">writeProfileInternal</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">runtimeProfile</span><span class="w"> </span><span class="kd">func</span><span class="p">([]</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">BlockProfileRecord</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="p">))</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">BlockProfileRecord</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">runtimeProfile</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">make</span><span class="p">([]</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">BlockProfileRecord</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="o">+</span><span class="mi">50</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">runtimeProfile</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="p">[:</span><span class="nx">n</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">break</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËØ•ÊµÅÁ®ãÂ∫ïÂ±Ç‰ºöË∞ÉÁî®Âà∞ BlockProfile ÊñπÊ≥ïÔºåÂÖ∂‰∏≠ÈÅçÂéÜ‰∫Ü blockBuckets ÈìæË°®ÔºåÊúÄÁªàÂÆåÊàê block ‰ø°ÊÅØÁöÑËæìÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// BlockProfile returns n, the number of records in the current blocking profile.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// If len(p) &gt;= n, BlockProfile copies the profile into p and returns n, true.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// If len(p) &lt; n, BlockProfile does not change p and returns n, false.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">// Most clients should use the runtime/pprof package or</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// the testing package&#39;s -test.blockprofile flag instead</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// of calling BlockProfile directly.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">BlockProfile</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">BlockProfileRecord</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profBlockLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">head</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nx">bbuckets</span><span class="p">.</span><span class="nf">Load</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">head</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">n</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">head</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">bp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">bp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">r</span><span class="p">.</span><span class="nx">Count</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nx">bp</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// Prevent callers from having to worry about division by zero errors.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// See discussion on http://golang.org/cl/299991.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">Count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">r</span><span class="p">.</span><span class="nx">Count</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">r</span><span class="p">.</span><span class="nx">Cycles</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">bp</span><span class="p">.</span><span class="nx">cycles</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">copy</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">Stack0</span><span class="p">[:],</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">stk</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">Stack0</span><span class="p">);</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">r</span><span class="p">.</span><span class="nx">Stack0</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profBlockLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="27-mutex-ÂàÜÊûê">2.7 mutex ÂàÜÊûê
</h3><p>mutex ‰∏é block ÁöÑÊµÅÁ®ãÊØîËæÉÁ±ª‰ººÔºåÂå∫Âà´Âú®‰∫é‰∏äÊä•Êó∂Êú∫ÊòØÂú®Ëß£ÈîÅÁöÑ mutex.Unlock ÊñπÊ≥ï‰∏≠Ôºö</p>
<p><img src="/img/ai/5ae3f1a827d48b1aa7401426044bfdfb.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Mutex Ëß£ÈîÅÊñπÊ≥ï‰ª£Á†Å‰Ωç‰∫é sync/mutex.goÔºåÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºåÂè™ÊúâÂú®Â≠òÂú®ÈîÅÁ´û‰∫âÂÖ≥Á≥ªÔºàÊúâÂÖ∂‰ªñ goroutine Â∞ùËØïÊä¢ÈîÅÔºâÊó∂ÔºåÊâç‰ºöÊ≠•ÂÖ•Âà∞ unlockSlow ÊñπÊ≥ï‰∏≠ÔºåÂÖ∂‰∏≠Êâç‰ºöÂ≠òÂú® mutex ‰∫ã‰ª∂‰∏äÊä•Ê°©ÁÇπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">m</span><span class="w"> </span><span class="o">*</span><span class="nx">Mutex</span><span class="p">)</span><span class="w"> </span><span class="nf">unlockSlow</span><span class="p">(</span><span class="nx">new</span><span class="w"> </span><span class="kt">int32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">runtime_Semrelease</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">m</span><span class="p">.</span><span class="nx">sema</span><span class="p">,</span><span class="w"> </span><span class="o">...</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">semrelease1</span><span class="p">(</span><span class="nx">addr</span><span class="w"> </span><span class="o">*</span><span class="kt">uint32</span><span class="p">,</span><span class="w"> </span><span class="nx">handoff</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="nx">skipframes</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">mutexevent</span><span class="p">(</span><span class="nx">t0</span><span class="o">-</span><span class="nx">acquiretime</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="o">+</span><span class="nx">skipframes</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® mutexevent ÊñπÊ≥ï‰∏≠ËÉΩÁúãÂà∞ÂëºÂ∫î‰∫é 1.5 Â∞èËäÇ‰∏≠ runtime.SetMutexProfileFraction(1) ËÆæÂÆöÁöÑÂÜÖÂÆπÔºö</p>
<ul>
<li>
<p>‚Ä¢ Â¶ÇÊûú rate &lt;= 0 Âàô‰∏ç‰∏äÊä•</p>
</li>
<li>
<p>‚Ä¢ Â¶ÇÊûú rate = 1 ÂàôÊØèÊ¨°‰∏äÊä•</p>
</li>
<li>
<p>‚Ä¢ Â¶ÇÊûú rate &gt; 1 ÂàôÊúâ 1/rate ÁöÑÊ¶ÇÁéáËøõË°å‰∏äÊä•</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="cp">//go:linkname mutexevent sync.event</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">mutexevent</span><span class="p">(</span><span class="nx">cycles</span><span class="w"> </span><span class="kt">int64</span><span class="p">,</span><span class="w"> </span><span class="nx">skip</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">cycles</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">cycles</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">rate</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nx">atomic</span><span class="p">.</span><span class="nf">Load64</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">mutexprofilerate</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// TODO(pjw): measure impact of always calling fastrand vs using something</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// like malloc.go:nextSample()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nf">fastrand</span><span class="p">())</span><span class="o">%</span><span class="nx">rate</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">saveblockevent</span><span class="p">(</span><span class="nx">cycles</span><span class="p">,</span><span class="w"> </span><span class="nx">rate</span><span class="p">,</span><span class="w"> </span><span class="nx">skip</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">mutexProfile</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêéÁª≠Ëµ∞Âà∞ saveblockevent ÊµÅÁ®ã‰∏é block Áõ∏‰ººÔºå‰∏çÂÜçËµòËø∞.</p>
<p>ËØªÂèñ mutex ‰ø°ÊÅØÁöÑÊµÅÁ®ãÂÖ•Âè£ÊòØ mutexProfile ÁöÑ writeMutex ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">mutexProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;mutex&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countMutex</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeMutex</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// writeMutex writes the current mutex profile to w.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">writeMutex</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">writeProfileInternal</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;mutex&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">runtime</span><span class="p">.</span><span class="nx">MutexProfile</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠‰ºöÈÅçÂéÜÊâÄÊúâ mutexBucketÔºåÂèñÂæóÂØπÂ∫îÁöÑÂä†ÈîÅ‰ø°ÊÅØÂπ∂Ê±áÊÄªËæìÂá∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">MutexProfile</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">BlockProfileRecord</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">lock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profBlockLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">head</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">bucket</span><span class="p">)(</span><span class="nx">xbuckets</span><span class="p">.</span><span class="nf">Load</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">head</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">n</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">ok</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">head</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="p">;</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">allnext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">bp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">bp</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">r</span><span class="p">.</span><span class="nx">Count</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">int64</span><span class="p">(</span><span class="nx">bp</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">r</span><span class="p">.</span><span class="nx">Cycles</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">bp</span><span class="p">.</span><span class="nx">cycles</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">copy</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">Stack0</span><span class="p">[:],</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">stk</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">Stack0</span><span class="p">);</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">r</span><span class="p">.</span><span class="nx">Stack0</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">p</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">profBlockLock</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="goroutine-ÂàÜÊûê">goroutine ÂàÜÊûê
</h3><p><img src="/img/ai/a89935f7158e4e9ea91a3177afeaf2c4.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>ÊúÄÂêéÊù•Âà∞ goroutine ÂàÜÊûêÊµÅÁ®ãÔºåÊØîËæÉÁÆÄÂçïÔºåÁõ¥Êé•ÂèñÂæó g ÁöÑÊï∞ÈáèÂπ∂‰∏îÈÅçÂéÜÂêÑ‰∏™ g ÁöÑÊ†à‰ø°ÊÅØÂç≥ÂèØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">goroutineProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">Profile</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="s">&#34;goroutine&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">count</span><span class="p">:</span><span class="w"> </span><span class="nx">countGoroutine</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">write</span><span class="p">:</span><span class="w"> </span><span class="nx">writeGoroutine</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// writeGoroutine writes the current runtime GoroutineProfile to w.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">writeGoroutine</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="kt">error</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">writeRuntimeProfile</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">debug</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;goroutine&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">runtime_goroutineProfileWithLabels</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cp">//go:linkname runtime_goroutineProfileWithLabels runtime/pprof.runtime_goroutineProfileWithLabels</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">runtime_goroutineProfileWithLabels</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">StackRecord</span><span class="p">,</span><span class="w"> </span><span class="nx">labels</span><span class="w"> </span><span class="p">[]</span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">goroutineProfileWithLabels</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">labels</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// labels may be nil. If labels is non-nil, it must have the same length as p.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">goroutineProfileWithLabels</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">StackRecord</span><span class="p">,</span><span class="w"> </span><span class="nx">labels</span><span class="w"> </span><span class="p">[]</span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">labels</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">labels</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">labels</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">nil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">goroutineProfileWithLabelsConcurrent</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">labels</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ëé∑Âèñ goroutine ‰ø°ÊÅØÁöÑÂ∫ïÂ±ÇÊñπÊ≥ïÊòØ goroutineProfileWithLabelsConcurrentÔºö</p>
<ul>
<li>
<p>‚Ä¢ ÈÄöËøá gcount ÊñπÊ≥ïÔºåËØªÂèñ allglen Âπ∂ÈÄöËøáÈÅçÂéÜ allp Êï∞ÁªÑÁ°ÆÂÆö g ÁöÑÊï∞Èáè</p>
</li>
<li>
<p>‚Ä¢ ÈÅçÂéÜ g Êî∂ÈõÜÂÖ∂Ê†à‰ø°ÊÅØ</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">goroutineProfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">sema</span><span class="w">    </span><span class="kt">uint32</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">active</span><span class="w">  </span><span class="kt">bool</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">offset</span><span class="w">  </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Int64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">records</span><span class="w"> </span><span class="p">[]</span><span class="nx">StackRecord</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">labels</span><span class="w">  </span><span class="p">[]</span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">sema</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">goroutineProfileWithLabelsConcurrent</span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="p">[]</span><span class="nx">StackRecord</span><span class="p">,</span><span class="w"> </span><span class="nx">labels</span><span class="w"> </span><span class="p">[]</span><span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Ëé∑Âæó g ÁöÑÊÄªÊï∞. ÈÄöËøáÂÖ®Â±ÄÂèòÈáè allggen ‰ª•Âèä allp ‰∏≠ÁöÑ freeg ËÆ°ÁÆóËé∑Âæó</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="nf">gcount</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">goroutineProfile</span><span class="p">.</span><span class="nx">active</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">goroutineProfile</span><span class="p">.</span><span class="nx">records</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">p</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">goroutineProfile</span><span class="p">.</span><span class="nx">labels</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">labels</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ÈÄöËøá p ÊâøËΩΩÂêÑ‰∏™ g ÁöÑÊ†à‰ø°ÊÅØ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">fing</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fing</span><span class="p">.</span><span class="nx">goroutineProfiled</span><span class="p">.</span><span class="nf">Store</span><span class="p">(</span><span class="nx">goroutineProfileSatisfied</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nf">readgstatus</span><span class="p">(</span><span class="nx">fing</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nx">_Gdead</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">!</span><span class="nf">isSystemGoroutine</span><span class="p">(</span><span class="nx">fing</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nf">doRecordGoroutineProfile</span><span class="p">(</span><span class="nx">fing</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">func</span><span class="w"> </span><span class="nf">gcount</span><span class="p">()</span><span class="kt">int32</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">n</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">int32</span><span class="p">(</span><span class="nx">atomic</span><span class="p">.</span><span class="nf">Loaduintptr</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">allglen</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">sched</span><span class="p">.</span><span class="nx">gFree</span><span class="p">.</span><span class="nx">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">sched</span><span class="p">.</span><span class="nx">ngsys</span><span class="p">.</span><span class="nf">Load</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">pp</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">allp</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">n</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="nx">pp</span><span class="p">.</span><span class="nx">gFree</span><span class="p">.</span><span class="nx">n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// All these variables can be changed concurrently, so the result can be inconsistent.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// But at least the current goroutine is running.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Ëá≥Ê≠§ÔºåÊ≠£ÊñáÁªìÊùüÔºÅ</p>
<h2 id="3-ÊÄªÁªì">3 ÊÄªÁªì
</h2><p>Êú¨ÁØáÈÄöËøáÂÆûÊàò demo ‰ª•Âèä‰∏≤ËÅîÂ∫ïÂ±ÇÊ∫êÁ†ÅÁöÑÊñπÂºèÔºåÂíåÂ§ßÂÆ∂Êé¢ËÆ®‰∫Ü go ‰∏≠ÁöÑÊÄßËÉΩÂàÜÊûêÂ∑•ÂÖ∑‚Äî‚ÄîpprofÔºö</p>
<ul>
<li>
<p>‚Ä¢ Cpu ÂàÜÊûêÔºö</p>
</li>
<li>
<p>‚Ä¢ ÂêØÂä®ÂÆöÊó∂Âô® timerÔºåÂÆöÊúüÂêëÂêÑ‰∏™ thread ÂèëÈÄÅ SIGPROF ‰ø°Âè∑</p>
</li>
<li>
<p>‚Ä¢ Â§ÑÁêÜ SIGPROF ‰ø°Âè∑Êó∂ËÆ∞ÂΩïÂáΩÊï∞Ê†à‰ø°ÊÅØÔºåÈÄöËøáËøôÁßçÊäΩÊ†∑ÁöÑÊñπÂºèÂèçÊò†ÂêÑ‰∏™ÂáΩÊï∞ÂØπ CPU Âç†Áî®ÊÉÖÂÜµ</p>
</li>
<li>
<p>‚Ä¢ Heap ÂàÜÊûêÔºö</p>
</li>
<li>
<p>‚Ä¢ ÊØèÂàÜÈÖçÊåáÂÆöÂ§ßÂ∞èÁöÑÂÜÖÂ≠òÔºåÂ∞±‰ºöÈááÊ†∑‰∏ÄÁ¨îÂÜÖÂ≠òÂàÜÈÖç‰ø°ÊÅØÂπ∂ËÆ∞ÂΩïÂú®ÂÖ®Â±ÄÂèòÈáè memBlock ‰∏≠</p>
</li>
<li>
<p>‚Ä¢ ÊØèËΩÆ gc ÁªìÊùüÂâçÔºåÂêåÊ†∑Âú® memBlock ‰∏≠ËÆ∞ÂΩïÂÜÖÂ≠òÈáäÊîæ‰ø°ÊÅØ</p>
</li>
<li>
<p>‚Ä¢ ËØªÂèñÂÜÖÂ≠òÊåáÊ†áÊó∂ÔºåÈÅçÂéÜÂêÑ‰∏™ memBucket Âä†ËΩΩÁªìÊûúËøîÂõû</p>
</li>
<li>
<p>‚Ä¢ Block ÂàÜÊûêÔºö</p>
</li>
<li>
<p>‚Ä¢ Ê†πÊçÆ‰º†ÂèÇÁ°ÆÂÆöÈááÈõÜÈ¢ëÁéáÔºåÂú® goroutine ÈòªÂ°ûÂπ∂Ë¢´ÈáçÊñ∞Âî§ÈÜíÂêéËøõË°åÈòªÂ°û‰ø°ÊÅØ‰∏äÊä•ÔºåÂ∞ÜÂÖ∂Â≠òÂÇ®Âú®ÂÖ®Â±ÄÂèòÈáè blockBucket ‰∏≠</p>
</li>
<li>
<p>‚Ä¢ ËØªÂèñblockÊåáÊ†áÊó∂ÔºåÈÅçÂéÜÂêÑ‰∏™ blockBucket Âä†ËΩΩÁªìÊûúËøîÂõû</p>
</li>
<li>
<p>‚Ä¢ Mutex ÂàÜÊûêÔºö</p>
</li>
<li>
<p>‚Ä¢ Ê†πÊçÆ‰º†ÂèÇÁ°ÆÂÆöÈááÈõÜÈ¢ëÁéáÔºåÂú®Ëß£ÈîÅÂâç‰∏äÊä•Âä†ÈîÅÊó∂Èïø‰ø°ÊÅØÔºåÂ≠òÂÇ®Âú®ÂÖ®Â±ÄÂèòÈáè mutexBucket ‰∏≠</p>
</li>
<li>
<p>‚Ä¢ ËØªÂèñmutexÊåáÊ†áÊó∂ÔºåÈÅçÂéÜÂêÑ‰∏™ mutexBucket Âä†ËΩΩÁªìÊûúËøîÂõû</p>
</li>
<li>
<p>‚Ä¢ Goroutine ÂàÜÊûêÔºö</p>
</li>
<li>
<p>‚Ä¢ ËØªÂèñgoroutineÊåáÊ†áÊó∂ÈÅçÂéÜÂêÑ‰∏™ gÔºåËé∑ÂèñÂÖ∂Ê†à‰ø°ÊÅØÂêéËøîÂõû</p>
</li>
</ul>
<p>¬†</p>

</section>


<div class="article-adsense">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3614504270218797"
        crossorigin="anonymous"></script>
    <ins class="adsbygoogle" 
            style="display:block; text-align:center;" 
            data-ad-layout="in-article" 
            data-ad-format="fluid" 
            data-ad-client="ca-pub-3614504270218797"
        data-ad-slot="7868694184"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>



    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/pprof/">Pprof</a>
        
            <a href="/tags/golang/">Golang</a>
        
            <a href="/tags/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">ÊÄßËÉΩÂàÜÊûê</a>
        
            <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">ÊÄßËÉΩ‰ºòÂåñ</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
	const mainArticleElement = document.querySelector(".main-article");
        renderMathInElement(mainArticleElement, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>

    
</article>

    

    

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="yiGmMk/comment_blog"
    data-repo-id="MDEwOlJlcG9zaXRvcnkxOTcyMTY4NDA="
    data-category="Announcements"
    data-category-id="DIC_kwDOC8FKSM4CAcFc"
    data-mapping="title"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark_dimmed');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 AI
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.31.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
